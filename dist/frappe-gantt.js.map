<<<<<<< HEAD
{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 4e891d43764b940b0e60","webpack:///./src/Gantt.js","webpack:///./src/gantt.scss?b27d","webpack:///./src/gantt.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/Bar.js","webpack:///./src/Arrow.js"],"names":["Gantt","element","tasks","config","self","init","set_defaults","change_view_mode","unselect_all","view_is","get_bar","trigger_event","refresh","view_mode","defaults","header_height","column_width","step","view_modes","bar","height","arrow","curve","padding","date_format","custom_popup_html","Object","assign","reset_variables","document","querySelector","SVGElement","HTMLElement","TypeError","_tasks","_bars","_arrows","element_groups","updated_tasks","mode","set_scale","prepare","render","prepare_tasks","prepare_dependencies","prepare_dates","prepare_canvas","map","task","i","_start","moment","start","_end","end","diff","_index","startOf","add","clone","invalid","dependencies","deps","split","d","trim","filter","id","generate_id","dependency_map","t","push","gantt_start","gantt_end","set_gantt_dates","setup_dates","canvas","Snap","addClass","clear","setup_groups","make_grid","make_dates","make_bars","make_arrows","map_arrows_on_bars","set_width","set_scroll_position","bind_grid_click","subtract","endOf","dates","cur_date","groups","group","attr","scale","cur_width","node","getBoundingClientRect","width","actual_width","select","parent_element","parentElement","scroll_pos","get_min_date","scrollLeft","reduce","acc","curr","isSameOrBefore","make_grid_background","make_grid_rows","make_grid_header","make_grid_ticks","make_grid_highlights","grid_width","length","grid_height","rect","appendTo","grid","header_width","rows","lines","row_width","row_height","row_y","line","tick_x","tick_y","tick_height","date","tick_class","day","month","path","format","x","y","daysInMonth","get_dates_to_draw","text","lower_x","lower_y","lower_text","upper_text","$upper_text","upper_x","upper_y","getBBox","x2","remove","last_date","get_date_info","date_text","year","base_pos","x_pos","arrows","dependency","get_task","dep","arr","concat","from_task","to_task","click","details","selectAll","forEach","el","removeClass","modes","Array","isArray","find","name","Math","random","toString","slice","event","args","apply","Bar","gt","draw","bind","action_completed","prepare_values","prepare_plugins","compute_x","compute_y","corner_radius","duration","progress_width","progress","custom_class","bar_group","handle_group","plugin","Element","Paper","global","Fragment","prototype","getX","getY","getWidth","getHeight","getEndX","draw_bar","draw_progress_bar","draw_label","draw_resize_handles","$bar","$bar_progress","update_label_position","handle_width","polygon","get_progress_polygon_points","bar_progress","setup_click_event","show_details","bind_resize","bind_drag","bind_resize_progress","popover_group","details_box","render_details","f","shadow","e","get_details_position","transform","html","get_details_html","foreign_object","parse","append","isFunction","start_date","end_date","heading","line_1","line_2","get_handles","left","right","drag","onmove_left","onstart","onstop_left","onmove_right","onstop_right","dx","dy","onmove_handle_right","onstop_handle_right","onmove_handle_left","onstop_handle_left","onmove","onstop","handle","on_move","on_start","on_stop","max_dx","min_dx","owidth","finaldx","progress_changed","set_action_completed","ox","oy","run_method_for_dependencies","get_snap_position","update_bar_position","date_changed","fn","dm","deptask","dt","xs","valid_x","prev","update_attr","update_handle_position","update_progressbar_position","update_arrow_position","update_details_position","hasClass","toggleClass","compute_start_end_date","new_start_date","new_end_date","new_progress","compute_progress","setTimeout","x_in_units","width_in_units","parseInt","odx","rem","position","value","isNaN","label","update","functionToCheck","getType","call","Arrow","start_x","condition","start_y","end_x","end_y","from_is_below_to","clockwise","curve_y","offset","down_1","down_2"],"mappings":"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L;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;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","file":"frappe-gantt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Gantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Gantt\"] = factory();\n\telse\n\t\troot[\"Gantt\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4e891d43764b940b0e60\n **/","/* global moment, Snap */\n/**\n * Gantt:\n * \telement: querySelector string, HTML DOM or SVG DOM element, required\n * \ttasks: array of tasks, required\n *   task: { id, name, start, end, progress, dependencies, custom_class }\n * \tconfig: configuration options, optional\n */\nimport './gantt.scss';\n\nimport Bar from './Bar';\nimport Arrow from './Arrow';\n\nexport default function Gantt(element, tasks, config) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tset_defaults();\n\n\t\t// expose methods\n\t\tself.change_view_mode = change_view_mode;\n\t\tself.unselect_all = unselect_all;\n\t\tself.view_is = view_is;\n\t\tself.get_bar = get_bar;\n\t\tself.trigger_event = trigger_event;\n\t\tself.refresh = refresh;\n\n\t\t// initialize with default view mode\n\t\tchange_view_mode(self.config.view_mode);\n\t}\n\n\tfunction set_defaults() {\n\n\t\tconst defaults = {\n\t\t\theader_height: 50,\n\t\t\tcolumn_width: 30,\n\t\t\tstep: 24,\n\t\t\tview_modes: [\n\t\t\t\t'Hour',\n\t\t\t\t'Quarter Day',\n\t\t\t\t'Half Day',\n\t\t\t\t'Day',\n\t\t\t\t'Week',\n\t\t\t\t'Month'\n\t\t\t],\n\t\t\tbar: {\n\t\t\t\theight: 20\n\t\t\t},\n\t\t\tarrow: {\n\t\t\t\tcurve: 5\n\t\t\t},\n\t\t\tpadding: 18,\n\t\t\tview_mode: 'Day',\n\t\t\tdate_format: 'YYYY-MM-DD-H',\n\t\t\tcustom_popup_html: null\n\t\t};\n\t\tself.config = Object.assign({}, defaults, config);\n\n\t\treset_variables(tasks);\n\t}\n\n\tfunction reset_variables(tasks) {\n\t\tif(typeof element === 'string') {\n\t\t\tself.element = document.querySelector(element);\n\t\t} else if (element instanceof SVGElement) {\n\t\t\tself.element = element;\n\t\t} else if (element instanceof HTMLElement) {\n\t\t\tself.element = element.querySelector('svg');\n\t\t} else {\n\t\t\tthrow new TypeError('FrappÃ© Gantt only supports usage of a string CSS selector,' +\n\t\t\t\t' HTML DOM element or SVG DOM element for the \\'element\\' parameter');\n\t\t}\n\n\t\tself._tasks = tasks;\n\n\t\tself._bars = [];\n\t\tself._arrows = [];\n\t\tself.element_groups = {};\n\t}\n\n\tfunction refresh(updated_tasks) {\n\t\treset_variables(updated_tasks);\n\t\tchange_view_mode(self.config.view_mode);\n\t}\n\n\tfunction change_view_mode(mode) {\n\t\tset_scale(mode);\n\t\tprepare();\n\t\trender();\n\t\t// fire viewmode_change event\n\t\ttrigger_event('view_change', [mode]);\n\t}\n\n\tfunction prepare() {\n\t\tprepare_tasks();\n\t\tprepare_dependencies();\n\t\tprepare_dates();\n\t\tprepare_canvas();\n\t}\n\n\tfunction prepare_tasks() {\n\n\t\t// prepare tasks\n\t\tself.tasks = self._tasks.map((task, i) => {\n\n\t\t\t// momentify\n\t\t\ttask._start = moment(task.start, self.config.date_format);\n\t\t\ttask._end = moment(task.end, self.config.date_format);\n\n\t\t\t// make task invalid if duration too large\n\t\t\tif(task._end.diff(task._start, 'years') > 10) {\n\t\t\t\ttask.end = null;\n\t\t\t}\n\n\t\t\t// cache index\n\t\t\ttask._index = i;\n\n\t\t\t// invalid dates\n\t\t\tif(!task.start && !task.end) {\n\t\t\t\ttask._start = moment().startOf('day');\n\t\t\t\ttask._end = moment().startOf('day').add(2, 'days');\n\t\t\t}\n\t\t\tif(!task.start && task.end) {\n\t\t\t\ttask._start = task._end.clone().add(-2, 'days');\n\t\t\t}\n\t\t\tif(task.start && !task.end) {\n\t\t\t\ttask._end = task._start.clone().add(2, 'days');\n\t\t\t}\n\n\t\t\t// invalid flag\n\t\t\tif(!task.start || !task.end) {\n\t\t\t\ttask.invalid = true;\n\t\t\t}\n\n\t\t\t// dependencies\n\t\t\tif(typeof task.dependencies === 'string' || !task.dependencies) {\n\t\t\t\tlet deps = [];\n\t\t\t\tif(task.dependencies) {\n\t\t\t\t\tdeps = task.dependencies\n\t\t\t\t\t\t.split(',')\n\t\t\t\t\t\t.map(d => d.trim())\n\t\t\t\t\t\t.filter((d) => d);\n\t\t\t\t}\n\t\t\t\ttask.dependencies = deps;\n\t\t\t}\n\n\t\t\t// uids\n\t\t\tif(!task.id) {\n\t\t\t\ttask.id = generate_id(task);\n\t\t\t}\n\n\t\t\treturn task;\n\t\t});\n\t}\n\n\tfunction prepare_dependencies() {\n\n\t\tself.dependency_map = {};\n\t\tfor(let t of self.tasks) {\n\t\t\tfor(let d of t.dependencies) {\n\t\t\t\tself.dependency_map[d] = self.dependency_map[d] || [];\n\t\t\t\tself.dependency_map[d].push(t.id);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction prepare_dates() {\n\n\t\tself.gantt_start = self.gantt_end = null;\n\t\tfor(let task of self.tasks) {\n\t\t\t// set global start and end date\n\t\t\tif(!self.gantt_start || task._start < self.gantt_start) {\n\t\t\t\tself.gantt_start = task._start;\n\t\t\t}\n\t\t\tif(!self.gantt_end || task._end > self.gantt_end) {\n\t\t\t\tself.gantt_end = task._end;\n\t\t\t}\n\t\t}\n\t\tset_gantt_dates();\n\t\tsetup_dates();\n\t}\n\n\tfunction prepare_canvas() {\n\t\tif(self.canvas) return;\n\t\tself.canvas = Snap(self.element).addClass('gantt');\n\t}\n\n\tfunction render() {\n\t\tclear();\n\t\tsetup_groups();\n\t\tmake_grid();\n\t\tmake_dates();\n\t\tmake_bars();\n\t\tmake_arrows();\n\t\tmap_arrows_on_bars();\n\t\tset_width();\n\t\tset_scroll_position();\n\t\tbind_grid_click();\n\t}\n\n\tfunction clear() {\n\t\tself.canvas.clear();\n\t\tself._bars = [];\n\t\tself._arrows = [];\n\t}\n\n\tfunction set_gantt_dates() {\n\n\t\tif(view_is(['Hour'])) {\n\t\t\tself.gantt_start = self.gantt_start.clone().subtract(24, 'Hour');\n\t\t\tself.gantt_end = self.gantt_end.clone().add(7, 'Hour');\n\t\t} else if(view_is(['Quarter Day', 'Half Day'])) {\n\t\t\tself.gantt_start = self.gantt_start.clone().subtract(7, 'day');\n\t\t\tself.gantt_end = self.gantt_end.clone().add(7, 'day');\n\t\t} else if(view_is('Month')) {\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('year');\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'year');\n\t\t} else {\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('month').subtract(1, 'month');\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'month');\n\t\t}\n\t}\n\n\tfunction setup_dates() {\n\n\t\tself.dates = [];\n\t\tlet cur_date = null;\n\n\t\twhile(cur_date === null || cur_date < self.gantt_end) {\n\t\t\tif(!cur_date) {\n\t\t\t\tcur_date = self.gantt_start.clone();\n\t\t\t} else {\n\t\t\t\tcur_date = view_is('Month') ?\n\t\t\t\t\tcur_date.clone().add(1, 'month') :\n\t\t\t\t\tcur_date.clone().add(self.config.step, 'hours');\n\t\t\t}\n\t\t\tself.dates.push(cur_date);\n\t\t}\n\t}\n\n\tfunction setup_groups() {\n\n\t\tconst groups = ['grid', 'date', 'arrow', 'progress', 'bar', 'details'];\n\t\t// make group layers\n\t\tfor(let group of groups) {\n\t\t\tself.element_groups[group] = self.canvas.group().attr({'id': group});\n\t\t}\n\t}\n\n\tfunction set_scale(scale) {\n\t\tself.config.view_mode = scale;\n\n\t\tif(scale === 'Hour') {\n\t\t\tself.config.step = 1;\n\t\t\tself.config.column_width = 5;\n\t\t} else if(scale === 'Day') {\n\t\t\tself.config.step = 24;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Half Day') {\n\t\t\tself.config.step = 24 / 2;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Quarter Day') {\n\t\t\tself.config.step = 24 / 4;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Week') {\n\t\t\tself.config.step = 24 * 7;\n\t\t\tself.config.column_width = 140;\n\t\t} else if(scale === 'Month') {\n\t\t\tself.config.step = 24 * 30;\n\t\t\tself.config.column_width = 120;\n\t\t}\n\t}\n\n\tfunction set_width() {\n\t\tconst cur_width = self.canvas.node.getBoundingClientRect().width;\n\t\tconst actual_width = self.canvas.select('#grid .grid-row').attr('width');\n\t\tif(cur_width < actual_width) {\n\t\t\tself.canvas.attr('width', actual_width);\n\t\t}\n\t}\n\n\tfunction set_scroll_position() {\n\t\tconst parent_element = self.element.parentElement;\n\n\t\tif(!parent_element) return;\n\n\t\tconst scroll_pos = get_min_date().diff(self.gantt_start, 'hours') /\n\t\t\tself.config.step * self.config.column_width - self.config.column_width;\n\t\tparent_element.scrollLeft = scroll_pos;\n\t}\n\n\tfunction get_min_date() {\n\t\tconst task = self.tasks.reduce((acc, curr) => {\n\t\t\treturn curr._start.isSameOrBefore(acc._start) ? curr : acc;\n\t\t});\n\t\treturn task._start;\n\t}\n\n\tfunction make_grid() {\n\t\tmake_grid_background();\n\t\tmake_grid_rows();\n\t\tmake_grid_header();\n\t\tmake_grid_ticks();\n\t\tmake_grid_highlights();\n\t}\n\n\tfunction make_grid_background() {\n\n\t\tconst grid_width = self.dates.length * self.config.column_width,\n\t\t\tgrid_height = self.config.header_height + self.config.padding +\n\t\t\t\t(self.config.bar.height + self.config.padding) * self.tasks.length;\n\n\t\tself.canvas.rect(0, 0, grid_width, grid_height)\n\t\t\t.addClass('grid-background')\n\t\t\t.appendTo(self.element_groups.grid);\n\n\t\tself.canvas.attr({\n\t\t\theight: grid_height + self.config.padding + 100,\n\t\t\twidth: '100%'\n\t\t});\n\t}\n\n\tfunction make_grid_header() {\n\t\tconst header_width = self.dates.length * self.config.column_width,\n\t\t\theader_height = self.config.header_height + 10;\n\t\tself.canvas.rect(0, 0, header_width, header_height)\n\t\t\t.addClass('grid-header')\n\t\t\t.appendTo(self.element_groups.grid);\n\t}\n\n\tfunction make_grid_rows() {\n\n\t\tconst rows = self.canvas.group().appendTo(self.element_groups.grid),\n\t\t\tlines = self.canvas.group().appendTo(self.element_groups.grid),\n\t\t\trow_width = self.dates.length * self.config.column_width,\n\t\t\trow_height = self.config.bar.height + self.config.padding;\n\n\t\tlet row_y = self.config.header_height + self.config.padding / 2;\n\n\t\tfor(let task of self.tasks) { // eslint-disable-line\n\t\t\tself.canvas.rect(0, row_y, row_width, row_height)\n\t\t\t\t.addClass('grid-row')\n\t\t\t\t.appendTo(rows);\n\n\t\t\tself.canvas.line(0, row_y + row_height, row_width, row_y + row_height)\n\t\t\t\t.addClass('row-line')\n\t\t\t\t.appendTo(lines);\n\n\t\t\trow_y += self.config.bar.height + self.config.padding;\n\t\t}\n\t}\n\n\tfunction make_grid_ticks() {\n\t\tlet tick_x = 0,\n\t\t\ttick_y = self.config.header_height + self.config.padding / 2,\n\t\t\ttick_height = (self.config.bar.height + self.config.padding) * self.tasks.length;\n\n\t\tfor(let date of self.dates) {\n\t\t\tlet tick_class = 'tick';\n\t\t\t// thick tick for monday\n\t\t\tif(view_is('Hour') && date.day() === 1) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\tif(view_is('Day') && date.day() === 1) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\t// thick tick for first week\n\t\t\tif(view_is('Week') && date.date() >= 1 && date.date() < 8) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\t// thick ticks for quarters\n\t\t\tif(view_is('Month') && date.month() % 3 === 0) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\n\t\t\tself.canvas.path(Snap.format('M {x} {y} v {height}', {\n\t\t\t\tx: tick_x,\n\t\t\t\ty: tick_y,\n\t\t\t\theight: tick_height\n\t\t\t}))\n\t\t\t.addClass(tick_class)\n\t\t\t.appendTo(self.element_groups.grid);\n\n\t\t\tif(view_is('Month')) {\n\t\t\t\ttick_x += date.daysInMonth() * self.config.column_width / 30;\n\t\t\t} else {\n\t\t\t\ttick_x += self.config.column_width;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction make_grid_highlights() {\n\n\t\t// highlight today's date\n\t\tif(view_is('Day')) {\n\t\t\tconst x = moment().startOf('day').diff(self.gantt_start, 'hours') /\n\t\t\t\t\tself.config.step * self.config.column_width;\n\t\t\tconst y = 0;\n\t\t\tconst width = self.config.column_width;\n\t\t\tconst height = (self.config.bar.height + self.config.padding) * self.tasks.length +\n\t\t\t\tself.config.header_height + self.config.padding / 2;\n\n\t\t\tself.canvas.rect(x, y, width, height)\n\t\t\t\t.addClass('today-highlight')\n\t\t\t\t.appendTo(self.element_groups.grid);\n\t\t}\n\t}\n\n\tfunction make_dates() {\n\n\t\tfor(let date of get_dates_to_draw()) {\n\t\t\tself.canvas.text(date.lower_x, date.lower_y, date.lower_text)\n\t\t\t\t.addClass('lower-text')\n\t\t\t\t.appendTo(self.element_groups.date);\n\n\t\t\tif(date.upper_text) {\n\t\t\t\tconst $upper_text = self.canvas.text(date.upper_x, date.upper_y, date.upper_text)\n\t\t\t\t\t.addClass('upper-text')\n\t\t\t\t\t.appendTo(self.element_groups.date);\n\n\t\t\t\t// remove out-of-bound dates\n\t\t\t\tif($upper_text.getBBox().x2 > self.element_groups.grid.getBBox().width) {\n\t\t\t\t\t$upper_text.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction get_dates_to_draw() {\n\t\tlet last_date = null;\n\t\tconst dates = self.dates.map((date, i) => {\n\t\t\tconst d = get_date_info(date, last_date, i);\n\t\t\tlast_date = date;\n\t\t\treturn d;\n\t\t});\n\t\treturn dates;\n\t}\n\n\tfunction get_date_info(date, last_date, i) {\n\t\tif(!last_date) {\n\t\t\tlast_date = date.clone().add(1, 'year');\n\t\t}\n\t\tconst date_text = {\n\t\t\t'Hour Day_lower': date.format('HH'),\n\t\t\t'Quarter Day_lower': date.format('HH'),\n\t\t\t'Half Day_lower': date.format('HH'),\n\t\t\t'Day_lower': date.date() !== last_date.date() ? date.format('D') : '',\n\t\t\t'Week_lower': date.month() !== last_date.month() ?\n\t\t\t\tdate.format('D MMM') : date.format('D'),\n\t\t\t'Month_lower': date.format('MMMM'),\n\t\t\t'Hour Day_upper': date.date() !== last_date.date() ? date.format('H D MMM') : '',\n\t\t\t'Quarter Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n\t\t\t'Half Day_upper': date.date() !== last_date.date() ?\n\t\t\t\tdate.month() !== last_date.month() ?\n\t\t\t\tdate.format('D MMM') : date.format('D') : '',\n\t\t\t'Day_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n\t\t\t'Week_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\n\t\t\t'Month_upper': date.year() !== last_date.year() ? date.format('YYYY') : ''\n\t\t};\n\n\t\tconst base_pos = {\n\t\t\tx: i * self.config.column_width,\n\t\t\tlower_y: self.config.header_height,\n\t\t\tupper_y: self.config.header_height - 25\n\t\t};\n\n\t\tconst x_pos = {\n\t\t\t'Hour Day_lower': (self.config.column_width) / 2,\n\t\t\t'Hour Day_upper': 0,\n\t\t\t'Quarter Day_lower': (self.config.column_width * 4) / 2,\n\t\t\t'Quarter Day_upper': 0,\n\t\t\t'Half Day_lower': (self.config.column_width * 2) / 2,\n\t\t\t'Half Day_upper': 0,\n\t\t\t'Day_lower': self.config.column_width / 2,\n\t\t\t'Day_upper': (self.config.column_width * 30) / 2,\n\t\t\t'Week_lower': 0,\n\t\t\t'Week_upper': (self.config.column_width * 4) / 2,\n\t\t\t'Month_lower': self.config.column_width / 2,\n\t\t\t'Month_upper': (self.config.column_width * 12) / 2\n\t\t};\n\n\t\treturn {\n\t\t\tupper_text: date_text[`${self.config.view_mode}_upper`],\n\t\t\tlower_text: date_text[`${self.config.view_mode}_lower`],\n\t\t\tupper_x: base_pos.x + x_pos[`${self.config.view_mode}_upper`],\n\t\t\tupper_y: base_pos.upper_y,\n\t\t\tlower_x: base_pos.x + x_pos[`${self.config.view_mode}_lower`],\n\t\t\tlower_y: base_pos.lower_y\n\t\t};\n\t}\n\n\tfunction make_arrows() {\n\t\tself._arrows = [];\n\t\tfor(let task of self.tasks) {\n\t\t\tlet arrows = [];\n\t\t\tarrows = task.dependencies.map(dep => {\n\t\t\t\tconst dependency = get_task(dep);\n\t\t\t\tif(!dependency) return;\n\n\t\t\t\tconst arrow = Arrow(\n\t\t\t\t\tself, // gt\n\t\t\t\t\tself._bars[dependency._index], // from_task\n\t\t\t\t\tself._bars[task._index] // to_task\n\t\t\t\t);\n\t\t\t\tself.element_groups.arrow.add(arrow.element);\n\t\t\t\treturn arrow; // eslint-disable-line\n\t\t\t}).filter(arr => arr); // filter falsy values\n\t\t\tself._arrows = self._arrows.concat(arrows);\n\t\t}\n\t}\n\n\tfunction make_bars() {\n\n\t\tself._bars = self.tasks.map((task) => {\n\t\t\tconst bar = Bar(self, task);\n\t\t\tself.element_groups.bar.add(bar.group);\n\t\t\treturn bar;\n\t\t});\n\t}\n\n\tfunction map_arrows_on_bars() {\n\t\tfor(let bar of self._bars) {\n\t\t\tbar.arrows = self._arrows.filter(arrow => {\n\t\t\t\treturn (arrow.from_task.task.id === bar.task.id) ||\n\t\t\t\t\t(arrow.to_task.task.id === bar.task.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction bind_grid_click() {\n\t\tself.element_groups.grid.click(() => {\n\t\t\tunselect_all();\n\t\t\tself.element_groups.details\n\t\t\t\t.selectAll('.details-wrapper')\n\t\t\t\t.forEach(el => el.addClass('hide'));\n\t\t});\n\t}\n\n\tfunction unselect_all() {\n\t\tself.canvas.selectAll('.bar-wrapper').forEach(el => {\n\t\t\tel.removeClass('active');\n\t\t});\n\t}\n\n\tfunction view_is(modes) {\n\t\tif (typeof modes === 'string') {\n\t\t\treturn self.config.view_mode === modes;\n\t\t} else if(Array.isArray(modes)) {\n\t\t\tfor (let mode of modes) {\n\t\t\t\tif(self.config.view_mode === mode) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tfunction get_task(id) {\n\t\treturn self.tasks.find((task) => {\n\t\t\treturn task.id === id;\n\t\t});\n\t}\n\n\tfunction get_bar(id) {\n\t\treturn self._bars.find((bar) => {\n\t\t\treturn bar.task.id === id;\n\t\t});\n\t}\n\n\tfunction generate_id(task) {\n\t\treturn task.name + '_' + Math.random().toString(36).slice(2, 12);\n\t}\n\n\tfunction trigger_event(event, args) {\n\t\tif(self.config['on_' + event]) {\n\t\t\tself.config['on_' + event].apply(null, args);\n\t\t}\n\t}\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Gantt.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/gantt.scss\n ** module id = 1\n ** module chunks = 0\n **/","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".gantt .grid-background {\\n  fill: none; }\\n\\n.gantt .grid-header {\\n  fill: #ffffff;\\n  stroke: #e0e0e0;\\n  stroke-width: 1.4; }\\n\\n.gantt .grid-row {\\n  fill: #ffffff; }\\n\\n.gantt .grid-row:nth-child(even) {\\n  fill: #f5f5f5; }\\n\\n.gantt .row-line {\\n  stroke: #ebeff2; }\\n\\n.gantt .tick {\\n  stroke: #e0e0e0;\\n  stroke-width: 0.2; }\\n  .gantt .tick.thick {\\n    stroke-width: 0.4; }\\n\\n.gantt .today-highlight {\\n  fill: #fcf8e3;\\n  opacity: 0.5; }\\n\\n.gantt #arrow {\\n  fill: none;\\n  stroke: #666;\\n  stroke-width: 1.4; }\\n\\n.gantt .bar {\\n  fill: #b8c2cc;\\n  stroke: #8D99A6;\\n  stroke-width: 0;\\n  transition: stroke-width .3s ease; }\\n\\n.gantt .bar-progress {\\n  fill: #a3a3ff; }\\n\\n.gantt .bar-invalid {\\n  fill: transparent;\\n  stroke: #8D99A6;\\n  stroke-width: 1;\\n  stroke-dasharray: 5; }\\n  .gantt .bar-invalid ~ .bar-label {\\n    fill: #555; }\\n\\n.gantt .bar-label {\\n  fill: #fff;\\n  dominant-baseline: central;\\n  text-anchor: middle;\\n  font-size: 12px;\\n  font-weight: lighter; }\\n  .gantt .bar-label.big {\\n    fill: #555;\\n    text-anchor: start; }\\n\\n.gantt .handle {\\n  fill: #ddd;\\n  cursor: ew-resize;\\n  opacity: 0;\\n  visibility: hidden;\\n  transition: opacity .3s ease; }\\n\\n.gantt .bar-wrapper {\\n  cursor: pointer; }\\n  .gantt .bar-wrapper:hover .bar {\\n    stroke-width: 2; }\\n  .gantt .bar-wrapper:hover .handle {\\n    visibility: visible;\\n    opacity: 1; }\\n  .gantt .bar-wrapper.active .bar {\\n    stroke-width: 2; }\\n\\n.gantt .lower-text, .gantt .upper-text {\\n  font-size: 12px;\\n  text-anchor: middle; }\\n\\n.gantt .upper-text {\\n  fill: #555; }\\n\\n.gantt .lower-text {\\n  fill: #333; }\\n\\n.gantt #details .details-container {\\n  background: #fff;\\n  display: inline-block;\\n  padding: 12px; }\\n  .gantt #details .details-container h5, .gantt #details .details-container p {\\n    margin: 0; }\\n  .gantt #details .details-container h5 {\\n    font-size: 12px;\\n    font-weight: bold;\\n    margin-bottom: 10px;\\n    color: #555; }\\n  .gantt #details .details-container p {\\n    font-size: 12px;\\n    margin-bottom: 6px;\\n    color: #666; }\\n  .gantt #details .details-container p:last-child {\\n    margin-bottom: 0; }\\n\\n.gantt .hide {\\n  display: none; }\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/leewalters/Github/tfm.gantt/src/src/gantt.scss\"],\"names\":[],\"mappings\":\"AAYA;EAGE,WAAU,EACV;;AAJF;EAME,cAAa;EACb,gBAjBoB;EAkBpB,kBAAiB,EACjB;;AATF;EAWE,cAAa,EACb;;AAZF;EAcE,cAvBgB,EAwBhB;;AAfF;EAiBE,gBAzB0B,EA0B1B;;AAlBF;EAoBE,gBA9BoB;EA+BpB,kBAAiB,EAIjB;EAzBF;IAuBG,kBAAiB,EACjB;;AAxBH;EA2BE,cAlCoB;EAmCpB,aAAY,EACZ;;AA7BF;EAgCE,WAAU;EACV,aAvCe;EAwCf,kBAAiB,EACjB;;AAnCF;EAsCE,cAlDiB;EAmDjB,gBAlDkB;EAmDlB,gBAAe;EACf,kCAAiC,EACjC;;AA1CF;EA4CE,cA/CY,EAgDZ;;AA7CF;EA+CE,kBAAiB;EACjB,gBA3DkB;EA4DlB,gBAAe;EACf,oBAAmB,EAKnB;EAvDF;IAqDG,WA1Dc,EA2Dd;;AAtDH;EAyDE,WAAU;EACV,2BAA0B;EAC1B,oBAAmB;EACnB,gBAAe;EACf,qBAAoB,EAMpB;EAnEF;IAgEG,WArEc;IAsEd,mBAAkB,EAClB;;AAlEH;EAsEE,WAxEiB;EAyEjB,kBAAiB;EACjB,WAAU;EACV,mBAAkB;EAClB,6BAA4B,EAC5B;;AA3EF;EA8EE,gBAAe,EAkBf;EAhGF;IAkFI,gBAAe,EACf;EAnFJ;IAsFI,oBAAmB;IACnB,WAAU,EACV;EAxFJ;IA6FI,gBAAe,EACf;;AA9FJ;EAmGE,gBAAe;EACf,oBAAmB,EACnB;;AArGF;EAuGE,WA5Ge,EA6Gf;;AAxGF;EA0GE,WA9Ge,EA+Gf;;AA3GF;EA8GE,iBAAgB;EAChB,sBAAqB;EACrB,cAAa,EAsBb;EAtIF;IAmHG,UAAS,EACT;EApHH;IAuHG,gBAAe;IACf,kBAAiB;IACjB,oBAAmB;IACnB,YA/Hc,EAgId;EA3HH;IA8HG,gBAAe;IACf,mBAAkB;IAClB,YAtIc,EAuId;EAjIH;IAoIG,iBAAgB,EAChB;;AArIH;EAyIE,cAAa,EACb\",\"file\":\"gantt.scss\",\"sourcesContent\":[\"$bar-color: #b8c2cc;\\n$bar-stroke: #8D99A6;\\n$border-color: #e0e0e0;\\n$light-bg: #f5f5f5;\\n$light-border-color: #ebeff2;\\n$light-yellow: #fcf8e3;\\n$text-muted: #666;\\n$text-light: #555;\\n$text-color: #333;\\n$blue: #a3a3ff;\\n$handle-color: #ddd;\\n\\n.gantt {\\n\\n\\t.grid-background {\\n\\t\\tfill: none;\\n\\t}\\n\\t.grid-header {\\n\\t\\tfill: #ffffff;\\n\\t\\tstroke: $border-color;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\t.grid-row {\\n\\t\\tfill: #ffffff;\\n\\t}\\n\\t.grid-row:nth-child(even) {\\n\\t\\tfill: $light-bg;\\n\\t}\\n\\t.row-line {\\n\\t\\tstroke: $light-border-color;\\n\\t}\\n\\t.tick {\\n\\t\\tstroke: $border-color;\\n\\t\\tstroke-width: 0.2;\\n\\t\\t&.thick {\\n\\t\\t\\tstroke-width: 0.4;\\n\\t\\t}\\n\\t}\\n\\t.today-highlight {\\n\\t\\tfill: $light-yellow;\\n\\t\\topacity: 0.5;\\n\\t}\\n\\n\\t#arrow {\\n\\t\\tfill: none;\\n\\t\\tstroke: $text-muted;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\n\\t.bar {\\n\\t\\tfill: $bar-color;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 0;\\n\\t\\ttransition: stroke-width .3s ease;\\n\\t}\\n\\t.bar-progress {\\n\\t\\tfill: $blue;\\n\\t}\\n\\t.bar-invalid {\\n\\t\\tfill: transparent;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 1;\\n\\t\\tstroke-dasharray: 5;\\n\\n\\t\\t&~.bar-label {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\t.bar-label {\\n\\t\\tfill: #fff;\\n\\t\\tdominant-baseline: central;\\n\\t\\ttext-anchor: middle;\\n\\t\\tfont-size: 12px;\\n\\t\\tfont-weight: lighter;\\n\\n\\t\\t&.big {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t\\ttext-anchor: start;\\n\\t\\t}\\n\\t}\\n\\n\\t.handle {\\n\\t\\tfill: $handle-color;\\n\\t\\tcursor: ew-resize;\\n\\t\\topacity: 0;\\n\\t\\tvisibility: hidden;\\n\\t\\ttransition: opacity .3s ease;\\n\\t}\\n\\n\\t.bar-wrapper {\\n\\t\\tcursor: pointer;\\n\\n\\t\\t&:hover {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.handle {\\n\\t\\t\\t\\tvisibility: visible;\\n\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.active {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.lower-text, .upper-text {\\n\\t\\tfont-size: 12px;\\n\\t\\ttext-anchor: middle;\\n\\t}\\n\\t.upper-text {\\n\\t\\tfill: $text-light;\\n\\t}\\n\\t.lower-text {\\n\\t\\tfill: $text-color;\\n\\t}\\n\\n\\t#details .details-container {\\n\\t\\tbackground: #fff;\\n\\t\\tdisplay: inline-block;\\n\\t\\tpadding: 12px;\\n\\n\\t\\th5, p {\\n\\t\\t\\tmargin: 0;\\n\\t\\t}\\n\\n\\t\\th5 {\\n\\t\\t\\tfont-size: 12px;\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t\\tmargin-bottom: 10px;\\n\\t\\t\\tcolor: $text-light;\\n\\t\\t}\\n\\n\\t\\tp {\\n\\t\\t\\tfont-size: 12px;\\n\\t\\t\\tmargin-bottom: 6px;\\n\\t\\t\\tcolor: $text-muted;\\n\\t\\t}\\n\\n\\t\\tp:last-child {\\n\\t\\t\\tmargin-bottom: 0;\\n\\t\\t}\\n\\t}\\n\\n\\t.hide {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader?sourceMap!./~/sass-loader?sourceMap!./src/gantt.scss\n ** module id = 2\n ** module chunks = 0\n **/","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function() {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\tvar result = [];\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar item = this[i];\n\t\t\tif(item[2]) {\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t} else {\n\t\t\t\tresult.push(item[1]);\n\t\t\t}\n\t\t}\n\t\treturn result.join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 3\n ** module chunks = 0\n **/","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\treturn /msie [6-9]\\b/.test(self.navigator.userAgent.toLowerCase());\n\t}),\n\tgetHeadElement = memoize(function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [];\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the bottom of <head>.\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar head = getHeadElement();\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\thead.insertBefore(styleElement, head.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\thead.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\thead.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\tstyleElement.type = \"text/css\";\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\tlinkElement.rel = \"stylesheet\";\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 4\n ** module chunks = 0\n **/","/* global Snap */\n/*\n\tClass: Bar\n\n\tOpts:\n\t\tgt: Gantt object\n\t\ttask: task object\n*/\n\nexport default function Bar(gt, task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tset_defaults();\n\t\tprepare();\n\t\tdraw();\n\t\tbind();\n\t}\n\n\tfunction set_defaults() {\n\t\tself.action_completed = false;\n\t\tself.task = task;\n\t}\n\n\tfunction prepare() {\n\t\tprepare_values();\n\t\tprepare_plugins();\n\t}\n\n\tfunction prepare_values() {\n\t\tself.invalid = self.task.invalid;\n\t\tself.height = gt.config.bar.height;\n\t\tself.x = compute_x();\n\t\tself.y = compute_y();\n\t\tself.corner_radius = 3;\n\t\tself.duration = (self.task._end.diff(self.task._start, 'hours') + 24) / gt.config.step;\n\t\tself.width = gt.config.column_width * self.duration;\n\t\tself.progress_width = gt.config.column_width * self.duration * (self.task.progress / 100) || 0;\n\t\tself.group = gt.canvas.group().addClass('bar-wrapper').addClass(self.task.custom_class || '');\n\t\tself.bar_group = gt.canvas.group().addClass('bar-group').appendTo(self.group);\n\t\tself.handle_group = gt.canvas.group().addClass('handle-group').appendTo(self.group);\n\t}\n\n\tfunction prepare_plugins() {\n\t\tSnap.plugin(function (Snap, Element, Paper, global, Fragment) {\n\t\t\tElement.prototype.getX = function () {\n\t\t\t\treturn +this.attr('x');\n\t\t\t};\n\t\t\tElement.prototype.getY = function () {\n\t\t\t\treturn +this.attr('y');\n\t\t\t};\n\t\t\tElement.prototype.getWidth = function () {\n\t\t\t\treturn +this.attr('width');\n\t\t\t};\n\t\t\tElement.prototype.getHeight = function () {\n\t\t\t\treturn +this.attr('height');\n\t\t\t};\n\t\t\tElement.prototype.getEndX = function () {\n\t\t\t\treturn this.getX() + this.getWidth();\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction draw() {\n\t\tdraw_bar();\n\t\tdraw_progress_bar();\n\t\tdraw_label();\n\t\tdraw_resize_handles();\n\t}\n\n\tfunction draw_bar() {\n\t\tself.$bar = gt.canvas.rect(self.x, self.y,\n\t\t\tself.width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar')\n\t\t\t.appendTo(self.bar_group);\n\t\tif (self.invalid) {\n\t\t\tself.$bar.addClass('bar-invalid');\n\t\t}\n\t}\n\n\tfunction draw_progress_bar() {\n\t\tif (self.invalid) return;\n\t\tself.$bar_progress = gt.canvas.rect(self.x, self.y,\n\t\t\tself.progress_width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar-progress')\n\t\t\t.appendTo(self.bar_group);\n\t}\n\n\tfunction draw_label() {\n\t\tgt.canvas.text(self.x + self.width / 2,\n\t\t\tself.y + self.height / 2,\n\t\t\tself.task.name)\n\t\t\t.addClass('bar-label')\n\t\t\t.appendTo(self.bar_group);\n\t\tupdate_label_position();\n\t}\n\n\tfunction draw_resize_handles() {\n\t\tif (self.invalid) return;\n\n\t\tconst bar = self.$bar,\n\t\t\thandle_width = 8;\n\n\t\tgt.canvas.rect(bar.getX() + bar.getWidth() - 9, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle right')\n\t\t\t.appendTo(self.handle_group);\n\t\tgt.canvas.rect(bar.getX() + 1, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle left')\n\t\t\t.appendTo(self.handle_group);\n\n\t\tif (self.task.progress && self.task.progress < 100) {\n\t\t\tgt.canvas.polygon(get_progress_polygon_points())\n\t\t\t\t.addClass('handle progress')\n\t\t\t\t.appendTo(self.handle_group);\n\t\t}\n\t}\n\n\tfunction get_progress_polygon_points() {\n\t\tconst bar_progress = self.$bar_progress;\n\t\treturn [\n\t\t\tbar_progress.getEndX() - 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\tbar_progress.getEndX() + 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\tbar_progress.getEndX(), bar_progress.getY() + bar_progress.getHeight() - 8.66\n\t\t];\n\t}\n\n\tfunction bind() {\n\t\tif (self.invalid) return;\n\t\tsetup_click_event();\n\t\tshow_details();\n\t\tbind_resize();\n\t\tbind_drag();\n\t\tbind_resize_progress();\n\t}\n\n\tfunction show_details() {\n\t\tconst popover_group = gt.element_groups.details;\n\t\tself.details_box = popover_group\n\t\t\t.select(`.details-wrapper[data-task='${self.task.id}']`);\n\n\t\tif (!self.details_box) {\n\t\t\tself.details_box = gt.canvas.group()\n\t\t\t\t.addClass('details-wrapper hide')\n\t\t\t\t.attr('data-task', self.task.id)\n\t\t\t\t.appendTo(popover_group);\n\n\t\t\trender_details();\n\n\t\t\tconst f = gt.canvas.filter(\n\t\t\t\tSnap.filter.shadow(0, 1, 1, '#666', 0.6));\n\t\t\tself.details_box.attr({\n\t\t\t\tfilter: f\n\t\t\t});\n\t\t}\n\n\t\tself.group.click((e) => {\n\t\t\tif (self.action_completed) {\n\t\t\t\t// just finished a move action, wait for a few seconds\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpopover_group.selectAll('.details-wrapper')\n\t\t\t\t.forEach(el => el.addClass('hide'));\n\t\t\tself.details_box.removeClass('hide');\n\t\t});\n\t}\n\n\tfunction render_details() {\n\t\tconst {x, y} = get_details_position();\n\t\tself.details_box.transform(`t${x},${y}`);\n\t\tself.details_box.clear();\n\n\t\tconst html = get_details_html();\n\t\tconst foreign_object =\n\t\t\tSnap.parse(`<foreignObject width=\"5000\" height=\"2000\">\n\t\t\t\t<body xmlns=\"http://www.w3.org/1999/xhtml\">\n\t\t\t\t\t${html}\n\t\t\t\t</body>\n\t\t\t\t</foreignObject>`);\n\t\tself.details_box.append(foreign_object);\n\t}\n\n\tfunction get_details_html() {\n\n\t\t// custom html in config\n\t\tif(gt.config.custom_popup_html) {\n\t\t\tconst html = gt.config.custom_popup_html;\n\t\t\tif(typeof html === 'string') {\n\t\t\t\treturn html;\n\t\t\t}\n\t\t\tif(isFunction(html)) {\n\t\t\t\treturn html(task);\n\t\t\t}\n\t\t}\n\n\t\tconst start_date = self.task._start.format('MMM D');\n\t\tconst end_date = self.task._end.format('MMM D');\n\t\tconst heading = `${self.task.name}: ${start_date} - ${end_date}`;\n\n\t\tconst line_1 = `Duration: ${self.duration} days`;\n\t\tconst line_2 = self.task.progress ? `Progress: ${self.task.progress}` : null;\n\n\t\tconst html = `\n\t\t\t<div class=\"details-container\">\n\t\t\t\t<h5>${heading}</h5>\n\t\t\t\t<p>${line_1}</p>\n\t\t\t\t${\n\t\t\t\t\tline_2 ? `<p>${line_2}</p>` : ''\n\t\t\t\t}\n\t\t\t</div>\n\t\t`;\n\t\treturn html;\n\t}\n\n\tfunction get_details_position() {\n\t\treturn {\n\t\t\tx: self.$bar.getEndX() + 2,\n\t\t\ty: self.$bar.getY() - 10\n\t\t};\n\t}\n\n\tfunction bind_resize() {\n\t\tconst { left, right } = get_handles();\n\n\t\tleft.drag(onmove_left, onstart, onstop_left);\n\t\tright.drag(onmove_right, onstart, onstop_right);\n\n\t\tfunction onmove_right(dx, dy) {\n\t\t\tonmove_handle_right(dx, dy);\n\t\t}\n\t\tfunction onstop_right() {\n\t\t\tonstop_handle_right();\n\t\t}\n\n\t\tfunction onmove_left(dx, dy) {\n\t\t\tonmove_handle_left(dx, dy);\n\t\t}\n\t\tfunction onstop_left() {\n\t\t\tonstop_handle_left();\n\t\t}\n\t}\n\n\tfunction get_handles() {\n\t\treturn {\n\t\t\tleft: self.handle_group.select('.handle.left'),\n\t\t\tright: self.handle_group.select('.handle.right')\n\t\t};\n\t}\n\n\tfunction bind_drag() {\n\t\tself.bar_group.drag(onmove, onstart, onstop);\n\t}\n\n\tfunction bind_resize_progress() {\n\t\tconst bar = self.$bar,\n\t\t\tbar_progress = self.$bar_progress,\n\t\t\thandle = self.group.select('.handle.progress');\n\t\thandle && handle.drag(on_move, on_start, on_stop);\n\n\t\tfunction on_move(dx, dy) {\n\t\t\tif (dx > bar_progress.max_dx) {\n\t\t\t\tdx = bar_progress.max_dx;\n\t\t\t}\n\t\t\tif (dx < bar_progress.min_dx) {\n\t\t\t\tdx = bar_progress.min_dx;\n\t\t\t}\n\n\t\t\tbar_progress.attr('width', bar_progress.owidth + dx);\n\t\t\thandle.attr('points', get_progress_polygon_points());\n\t\t\tbar_progress.finaldx = dx;\n\t\t}\n\t\tfunction on_stop() {\n\t\t\tif (!bar_progress.finaldx) return;\n\t\t\tprogress_changed();\n\t\t\tset_action_completed();\n\t\t}\n\t\tfunction on_start() {\n\t\t\tbar_progress.finaldx = 0;\n\t\t\tbar_progress.owidth = bar_progress.getWidth();\n\t\t\tbar_progress.min_dx = -bar_progress.getWidth();\n\t\t\tbar_progress.max_dx = bar.getWidth() - bar_progress.getWidth();\n\t\t}\n\t}\n\n\tfunction onstart() {\n\t\tconst bar = self.$bar;\n\t\tbar.ox = bar.getX();\n\t\tbar.oy = bar.getY();\n\t\tbar.owidth = bar.getWidth();\n\t\tbar.finaldx = 0;\n\t\trun_method_for_dependencies('onstart');\n\t}\n\tself.onstart = onstart;\n\n\tfunction onmove(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({x: bar.ox + bar.finaldx});\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t}\n\tself.onmove = onmove;\n\n\tfunction onstop() {\n\t\tconst bar = self.$bar;\n\t\tif (!bar.finaldx) return;\n\t\tdate_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop');\n\t}\n\tself.onstop = onstop;\n\n\tfunction onmove_handle_left(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({\n\t\t\tx: bar.ox + bar.finaldx,\n\t\t\twidth: bar.owidth - bar.finaldx\n\t\t});\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t}\n\tself.onmove_handle_left = onmove_handle_left;\n\n\tfunction onstop_handle_left() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop');\n\t}\n\tself.onstop_handle_left = onstop_handle_left;\n\n\tfunction run_method_for_dependencies(fn, args) {\n\t\tconst dm = gt.dependency_map;\n\t\tif (dm[self.task.id]) {\n\t\t\tfor (let deptask of dm[self.task.id]) {\n\t\t\t\tconst dt = gt.get_bar(deptask);\n\t\t\t\tdt[fn].apply(dt, args);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onmove_handle_right(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({width: bar.owidth + bar.finaldx});\n\t}\n\n\tfunction onstop_handle_right() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t}\n\n\tfunction update_bar_position({x = null, width = null}) {\n\t\tconst bar = self.$bar;\n\t\tif (x) {\n\t\t\t// get all x values of parent task\n\t\t\tconst xs = task.dependencies.map(dep => {\n\t\t\t\treturn gt.get_bar(dep).$bar.getX();\n\t\t\t});\n\t\t\t// child task must not go before parent\n\t\t\tconst valid_x = xs.reduce((prev, curr) => {\n\t\t\t\treturn x >= curr;\n\t\t\t}, x);\n\t\t\tif(!valid_x) {\n\t\t\t\twidth = null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdate_attr(bar, 'x', x);\n\t\t}\n\t\tif (width && width >= gt.config.column_width) {\n\t\t\tupdate_attr(bar, 'width', width);\n\t\t}\n\t\tupdate_label_position();\n\t\tupdate_handle_position();\n\t\tupdate_progressbar_position();\n\t\tupdate_arrow_position();\n\t\tupdate_details_position();\n\t}\n\n\tfunction setup_click_event() {\n\t\tself.group.click(function () {\n\t\t\tif (self.action_completed) {\n\t\t\t\t// just finished a move action, wait for a few seconds\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (self.group.hasClass('active')) {\n\t\t\t\tgt.trigger_event('click', [self.task]);\n\t\t\t}\n\t\t\tgt.unselect_all();\n\t\t\tself.group.toggleClass('active');\n\t\t});\n\t}\n\n\tfunction date_changed() {\n\t\tconst { new_start_date, new_end_date } = compute_start_end_date();\n\t\tself.task._start = new_start_date;\n\t\tself.task._end = new_end_date;\n\t\trender_details();\n\t\tgt.trigger_event('date_change',\n\t\t\t[self.task, new_start_date, new_end_date]);\n\t}\n\n\tfunction progress_changed() {\n\t\tconst new_progress = compute_progress();\n\t\tself.task.progress = new_progress;\n\t\trender_details();\n\t\tgt.trigger_event('progress_change',\n\t\t\t[self.task, new_progress]);\n\t}\n\n\tfunction set_action_completed() {\n\t\tself.action_completed = true;\n\t\tsetTimeout(() => self.action_completed = false, 2000);\n\t}\n\n\tfunction compute_start_end_date() {\n\t\tconst bar = self.$bar;\n\t\tconst x_in_units = bar.getX() / gt.config.column_width;\n\t\tconst new_start_date = gt.gantt_start.clone().add(x_in_units * gt.config.step, 'hours');\n\t\tconst width_in_units = bar.getWidth() / gt.config.column_width;\n\t\tconst new_end_date = new_start_date.clone().add(width_in_units * gt.config.step, 'hours');\n\t\t// lets say duration is 2 days\n\t\t// start_date = May 24 00:00:00\n\t\t// end_date = May 24 + 2 days = May 26 (incorrect)\n\t\t// so subtract 1 second so that\n\t\t// end_date = May 25 23:59:59\n\t\tnew_end_date.add('-1', 'seconds');\n\t\treturn { new_start_date, new_end_date };\n\t}\n\n\tfunction compute_progress() {\n\t\tconst progress = self.$bar_progress.getWidth() / self.$bar.getWidth() * 100;\n\t\treturn parseInt(progress, 10);\n\t}\n\n\tfunction compute_x() {\n\t\tlet x = self.task._start.diff(gt.gantt_start, 'hours') /\n\t\t\tgt.config.step * gt.config.column_width;\n\n\t\tif (gt.view_is('Month')) {\n\t\t\tx = self.task._start.diff(gt.gantt_start, 'days') *\n\t\t\t\tgt.config.column_width / 30;\n\t\t}\n\t\treturn x;\n\t}\n\n\tfunction compute_y() {\n\t\treturn gt.config.header_height + gt.config.padding +\n\t\t\tself.task._index * (self.height + gt.config.padding);\n\t}\n\n\tfunction get_snap_position(dx) {\n\t\tlet odx = dx, rem, position;\n\n\t\tif (gt.view_is('Week')) {\n\t\t\trem = dx % (gt.config.column_width / 7);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 14) ? 0 : gt.config.column_width / 7);\n\t\t} else if (gt.view_is('Month')) {\n\t\t\trem = dx % (gt.config.column_width / 30);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 60) ? 0 : gt.config.column_width / 30);\n\t\t} else {\n\t\t\trem = dx % gt.config.column_width;\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 2) ? 0 : gt.config.column_width);\n\t\t}\n\t\treturn position;\n\t}\n\n\tfunction update_attr(element, attr, value) {\n\t\tvalue = +value;\n\t\tif (!isNaN(value)) {\n\t\t\telement.attr(attr, value);\n\t\t}\n\t\treturn element;\n\t}\n\n\tfunction update_progressbar_position() {\n\t\tself.$bar_progress.attr('x', self.$bar.getX());\n\t\tself.$bar_progress.attr('width', self.$bar.getWidth() * (self.task.progress / 100));\n\t}\n\n\tfunction update_label_position() {\n\t\tconst bar = self.$bar,\n\t\t\tlabel = self.group.select('.bar-label');\n\t\tif (label.getBBox().width > bar.getWidth()) {\n\t\t\tlabel.addClass('big').attr('x', bar.getX() + bar.getWidth() + 5);\n\t\t} else {\n\t\t\tlabel.removeClass('big').attr('x', bar.getX() + bar.getWidth() / 2);\n\t\t}\n\t}\n\n\tfunction update_handle_position() {\n\t\tconst bar = self.$bar;\n\t\tself.handle_group.select('.handle.left').attr({\n\t\t\t'x': bar.getX() + 1\n\t\t});\n\t\tself.handle_group.select('.handle.right').attr({\n\t\t\t'x': bar.getEndX() - 9\n\t\t});\n\t\tconst handle = self.group.select('.handle.progress');\n\t\thandle && handle.attr('points', get_progress_polygon_points());\n\t}\n\n\tfunction update_arrow_position() {\n\t\tfor (let arrow of self.arrows) {\n\t\t\tarrow.update();\n\t\t}\n\t}\n\n\tfunction update_details_position() {\n\t\tconst {x, y} = get_details_position();\n\t\tself.details_box && self.details_box.transform(`t${x},${y}`);\n\t}\n\n\tfunction isFunction(functionToCheck) {\n\t\tvar getType = {};\n\t\treturn functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n\t}\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Bar.js\n **/","/* global Snap */\n/*\n\tClass: Arrow\n\tfrom_task ---> to_task\n\n\tOpts:\n\t\tgantt (Gantt object)\n\t\tfrom_task (Bar object)\n\t\tto_task (Bar object)\n*/\n\nexport default function Arrow(gt, from_task, to_task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tself.from_task = from_task;\n\t\tself.to_task = to_task;\n\t\tprepare();\n\t\tdraw();\n\t}\n\n\tfunction prepare() {\n\n\t\tself.start_x = from_task.$bar.getX() + from_task.$bar.getWidth() / 2;\n\n\t\tconst condition = () =>\n\t\t\tto_task.$bar.getX() < self.start_x + gt.config.padding &&\n\t\t\t\tself.start_x > from_task.$bar.getX() + gt.config.padding;\n\n\t\twhile(condition()) {\n\t\t\tself.start_x -= 10;\n\t\t}\n\n\t\tself.start_y = gt.config.header_height + gt.config.bar.height +\n\t\t\t(gt.config.padding + gt.config.bar.height) * from_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tself.end_x = to_task.$bar.getX() - gt.config.padding / 2;\n\t\tself.end_y = gt.config.header_height + gt.config.bar.height / 2 +\n\t\t\t(gt.config.padding + gt.config.bar.height) * to_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tconst from_is_below_to = (from_task.task._index > to_task.task._index);\n\t\tself.curve = gt.config.arrow.curve;\n\t\tself.clockwise = from_is_below_to ? 1 : 0;\n\t\tself.curve_y = from_is_below_to ? -self.curve : self.curve;\n\t\tself.offset = from_is_below_to ?\n\t\t\tself.end_y + gt.config.arrow.curve :\n\t\t\tself.end_y - gt.config.arrow.curve;\n\n\t\tself.path =\n\t\t\tSnap.format('M {start_x} {start_y} V {offset} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t{\n\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\toffset: self.offset,\n\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t});\n\n\t\tif(to_task.$bar.getX() < from_task.$bar.getX() + gt.config.padding) {\n\t\t\tself.path =\n\t\t\t\tSnap.format('M {start_x} {start_y} v {down_1} ' +\n\t\t\t\t'a {curve} {curve} 0 0 1 -{curve} {curve} H {left} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} -{curve} {curve_y} V {down_2} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t\t{\n\t\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\t\tdown_1: gt.config.padding / 2 - self.curve,\n\t\t\t\t\t\tdown_2: to_task.$bar.getY() + to_task.$bar.getHeight() / 2 - self.curve_y,\n\t\t\t\t\t\tleft: to_task.$bar.getX() - gt.config.padding,\n\t\t\t\t\t\toffset: self.offset,\n\t\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t\t});\n\t\t}\n\t}\n\n\tfunction draw() {\n\t\tself.element = gt.canvas.path(self.path)\n\t\t\t.attr('data-from', self.from_task.task.id)\n\t\t\t.attr('data-to', self.to_task.task.id);\n\t}\n\n\tfunction update() { // eslint-disable-line\n\t\tprepare();\n\t\tself.element.attr('d', self.path);\n\t}\n\tself.update = update;\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/Arrow.js\n **/"],"sourceRoot":""}
=======
{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap adb778fb05e848e71845","webpack:///./src/Gantt.js","webpack:///./src/gantt.scss?b27d","webpack:///./src/gantt.scss","webpack:///./~/css-loader/lib/css-base.js","webpack:///./~/style-loader/addStyles.js","webpack:///./src/Octogon.js","webpack:///./src/Utils.js","webpack:///./src/Arrow.js","webpack:///./src/ScrollUtils.js","webpack:///./~/mouse-wheel/wheel.js","webpack:///./~/to-px/topx.js","webpack:///./~/parse-unit/index.js"],"names":["Gantt","element","tasks","config","self","init","set_defaults","change_view_mode","unselect_all","view_is","get_bar","trigger_event","refresh","view_mode","defaults","header_height","column_width","step","view_modes","bar","height","arrow","curve","padding","date_format","custom_popup_html","Object","assign","reset_variables","document","querySelector","SVGElement","HTMLElement","TypeError","_tasks","_bars","_arrows","element_groups","updated_tasks","mode","set_scale","prepare","render","prepare_tasks","prepare_dependencies","prepare_dates","prepare_canvas","map","run","i","run_items","item","k","_start","moment","start","_end","end","diff","_index","_index_sub","startOf","add","clone","invalid","dependencies","deps","split","d","trim","filter","id","generate_id","dependency_map","flattenTasks","concat","t","push","console","log","gantt_start","gantt_end","forEach","set_gantt_dates","setup_dates","canvas","Snap","addClass","clear","setup_groups","make_grid","make_dates","make_bars","make_arrows","map_arrows_on_bars","set_width","set_scroll_position","bind_grid_click","subtract","endOf","dates","cur_date","groups","group","attr","scale","cur_width","node","getBoundingClientRect","width","actual_width","select","parent_element","parentElement","scroll_pos","get_min_date","scrollLeft","task","reduce","acc","curr","isSameOrBefore","make_grid_background","make_grid_rows","make_grid_header","make_grid_ticks","make_grid_highlights","grid_width","length","grid_height","rect","appendTo","grid","header_width","rows","lines","row_width","row_height","row_y","line","tick_x","tick_y","tick_height","date","tick_class","day","month","path","format","x","y","daysInMonth","get_dates_to_draw","text","lower_x","lower_y","lower_text","upper_text","$upper_text","upper_x","upper_y","getBBox","x2","remove","last_date","get_date_info","date_text","year","base_pos","x_pos","arrows","dependency","get_task","dep","arr","flattenBars","from_task","to_task","click","details","selectAll","el","removeClass","modes","Array","isArray","find","name","Math","random","toString","slice","event","args","apply","Octogon","gt","oct","draw","bind","action_completed","prepare_values","prepare_plugins","compute_x","compute_y","corner_radius","duration","progress_width","progress","custom_class","bar_group","handle_group","join","joinheight","setPolygon","pWidth","x1","y1","y2","x3","x4","y4","y5","y6","plugin","Element","Paper","global","Fragment","prototype","getX","getY","getWidth","getHeight","getEndX","draw_bar","draw_progress_bar","draw_label","draw_resize_handles","drawInnerOctogon","$barOct","polygon","$bar","updateInnerOctogon","w","pts","replace","animate","svg","$bar_progress","update_label_position","handle_width","get_progress_polygon_points","bar_progress","setup_click_event","show_details","bind_resize","bind_drag","bind_resize_progress","popover_group","details_box","render_details","f","shadow","e","get_details_position","transform","html","get_details_html","foreign_object","parse","append","isFunction","start_date","end_date","heading","line_1","line_2","get_handles","left","right","drag","onmove_left","onstart","onstop_left","onmove_right","onstop_right","dx","dy","onmove_handle_right","onstop_handle_right","onmove_handle_left","onstop_handle_left","onmove","onstop","handle","on_move","on_start","on_stop","max_dx","min_dx","owidth","finaldx","progress_changed","set_action_completed","ox","oy","run_method_for_dependencies","get_snap_position","update_bar_position","date_changed","fn","dm","deptask","dt","xs","valid_x","prev","update_attr","update_handle_position","update_progressbar_position","update_arrow_position","update_details_position","hasClass","toggleClass","compute_start_end_date","new_start_date","new_end_date","new_progress","compute_progress","setTimeout","x_in_units","width_in_units","parseInt","odx","rem","position","value","isNaN","label","update","functionToCheck","getType","call","debounce","func","wait","immediate","timeout","context","arguments","later","callNow","clearTimeout","Arrow","start_x","condition","start_y","end_x","end_y","from_is_below_to","clockwise","curve_y","offset","down_1","down_2","ScrollWheelInit","ClickChart","display","getElementById","require","dz","ev","offsetX","offsetY","addEventListener","clicked","evt"],"mappings":"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Q,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;;;;;;mBCvOwB+L,O;;AAFxB;;AAEe,UAASA,OAAT,CAAiBC,EAAjB,EAAqB/E,IAArB,EAA2B;;AAEzC,MAAMjH,OAAO,EAAb;AACA,MAAMiM,MAAM,EAAZ;;AAEA,WAAShM,IAAT,GAAgB;AACfC;AACAmC;AACA6J;AACAC;AACA;;AAED,WAASjM,YAAT,GAAwB;AACvBF,QAAKoM,gBAAL,GAAwB,KAAxB;AACApM,QAAKiH,IAAL,GAAYA,I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","file":"frappe-gantt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Gantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Gantt\"] = factory();\n\telse\n\t\troot[\"Gantt\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap adb778fb05e848e71845\n **/","/* global moment, Snap */\r\n/**\r\n * Gantt:\r\n * \telement: querySelector string, HTML DOM or SVG DOM element, required\r\n * \ttasks: array of tasks, required\r\n *   task: { id, name, start, end, progress, dependencies, custom_class }\r\n * \tconfig: configuration options, optional\r\n */\r\nimport './gantt.scss';\r\n\r\n// import Bar from './Bar';\r\nimport Octogon from './Octogon';\r\nimport Arrow from './Arrow';\r\nimport { ScrollWheelInit, ClickChart } from './ScrollUtils';\r\n\r\nexport default function Gantt(element, tasks, config) {\r\n\r\n\tconst self = {};\r\n\r\n\tfunction init() {\r\n\t\tset_defaults();\r\n\r\n\t\t// expose methods\r\n\t\tself.change_view_mode = change_view_mode;\r\n\t\tself.unselect_all = unselect_all;\r\n\t\tself.view_is = view_is;\r\n\t\tself.get_bar = get_bar;\r\n\t\tself.trigger_event = trigger_event;\r\n\t\tself.refresh = refresh;\r\n\r\n\t\t// initialize with default view mode\r\n\t\tchange_view_mode(self.config.view_mode);\r\n\r\n\t\tScrollWheelInit('gc');\r\n\t\tClickChart('gc');\r\n\t}\r\n\r\n\tfunction set_defaults() {\r\n\r\n\t\tconst defaults = {\r\n\t\t\theader_height: 50,\r\n\t\t\tcolumn_width: 30,\r\n\t\t\tstep: 24,\r\n\t\t\tview_modes: [\r\n\t\t\t\t'Minute',\r\n\t\t\t\t'Hour',\r\n\t\t\t\t'Quarter Day',\r\n\t\t\t\t'Half Day',\r\n\t\t\t\t'Day',\r\n\t\t\t\t'Week',\r\n\t\t\t\t'Month'\r\n\t\t\t],\r\n\t\t\tbar: {\r\n\t\t\t\theight: 20\r\n\t\t\t},\r\n\t\t\tarrow: {\r\n\t\t\t\tcurve: 5\r\n\t\t\t},\r\n\t\t\tpadding: 18,\r\n\t\t\tview_mode: 'Day',\r\n\t\t\tdate_format: 'YYYY-MM-DD HH:mm:ss',\r\n\t\t\tcustom_popup_html: null\r\n\t\t};\r\n\t\tself.config = Object.assign({}, defaults, config);\r\n\r\n\t\treset_variables(tasks);\r\n\t}\r\n\r\n\tfunction reset_variables(tasks) {\r\n\t\tif (typeof element === 'string') {\r\n\t\t\tself.element = document.querySelector(element);\r\n\t\t} else if (element instanceof SVGElement) {\r\n\t\t\tself.element = element;\r\n\t\t} else if (element instanceof HTMLElement) {\r\n\t\t\tself.element = element.querySelector('svg');\r\n\t\t} else {\r\n\t\t\tthrow new TypeError('FrappÃ© Gantt only supports usage of a string CSS selector,' +\r\n\t\t\t\t' HTML DOM element or SVG DOM element for the \\'element\\' parameter');\r\n\t\t}\r\n\r\n\t\tself._tasks = tasks;\r\n\r\n\t\tself._bars = [];\r\n\t\tself._arrows = [];\r\n\t\tself.element_groups = {};\r\n\t}\r\n\r\n\tfunction refresh(updated_tasks) {\r\n\t\treset_variables(updated_tasks);\r\n\t\tchange_view_mode(self.config.view_mode);\r\n\t}\r\n\r\n\tfunction change_view_mode(mode) {\r\n\t\tset_scale(mode);\r\n\t\tprepare();\r\n\t\trender();\r\n\t\t// fire viewmode_change event\r\n\t\ttrigger_event('view_change', [mode]);\r\n\t}\r\n\r\n\tfunction prepare() {\r\n\t\tprepare_tasks();\r\n\t\tprepare_dependencies();\r\n\t\tprepare_dates();\r\n\t\tprepare_canvas();\r\n\t}\r\n\r\n\tfunction prepare_tasks() {\r\n\r\n\t\t// prepare tasks\r\n\t\tself.tasks = self._tasks.map((run, i) => {\r\n\r\n\t\t\tvar run_items = run.map(function (item, k) {\r\n\t\t\t\t// momentify\r\n\t\t\t\titem._start = moment(item.start, self.config.date_format);\r\n\t\t\t\titem._end = moment(item.end, self.config.date_format);\r\n\r\n\t\t\t\t// make item invalid if duration too large\r\n\t\t\t\tif (item._end.diff(item._start, 'years') > 10) {\r\n\t\t\t\t\titem.end = null;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// cache index\r\n\t\t\t\titem._index = i;\r\n\t\t\t\titem._index_sub = k;\r\n\r\n\t\t\t\t// invalid dates\r\n\t\t\t\tif (!item.start && !item.end) {\r\n\t\t\t\t\titem._start = moment().startOf('day');\r\n\t\t\t\t\titem._end = moment().startOf('day').add(2, 'days');\r\n\t\t\t\t}\r\n\t\t\t\tif (!item.start && item.end) {\r\n\t\t\t\t\titem._start = item._end.clone().add(-2, 'days');\r\n\t\t\t\t}\r\n\t\t\t\tif (item.start && !item.end) {\r\n\t\t\t\t\titem._end = item._start.clone().add(2, 'days');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// invalid flag\r\n\t\t\t\tif (!item.start || !item.end) {\r\n\t\t\t\t\titem.invalid = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// dependencies\r\n\t\t\t\tif (typeof item.dependencies === 'string' || !item.dependencies) {\r\n\t\t\t\t\tlet deps = [];\r\n\t\t\t\t\tif (item.dependencies) {\r\n\t\t\t\t\t\tdeps = item.dependencies\r\n\t\t\t\t\t\t\t.split(',')\r\n\t\t\t\t\t\t\t.map(d => d.trim())\r\n\t\t\t\t\t\t\t.filter((d) => d);\r\n\t\t\t\t\t}\r\n\t\t\t\t\titem.dependencies = deps;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// uids\r\n\t\t\t\tif (!item.id) {\r\n\t\t\t\t\titem.id = generate_id(item);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t\treturn run_items;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction prepare_dependencies() {\r\n\t\tself.dependency_map = {};\r\n\t\tconst flattenTasks = [].concat(...self.tasks); // flatten multi-dimensional array\r\n\r\n\t\tfor (let t of flattenTasks) {\r\n\t\t\tfor (let d of t.dependencies) {\r\n\t\t\t\tself.dependency_map[d] = self.dependency_map[d] || [];\r\n\t\t\t\tself.dependency_map[d].push(t.id);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.log(self.dependency_map);\r\n\t}\r\n\r\n\tfunction prepare_dates() {\r\n\r\n\t\tself.gantt_start = self.gantt_end = null;\r\n\t\t// for (let task of self.tasks) {\r\n\t\tself.tasks.forEach(function (run) {\r\n\t\t\trun.forEach(function (item, i) {\r\n\t\t\t\t// set global start and end date\r\n\t\t\t\tif (!self.gantt_start || item._start < self.gantt_start) {\r\n\t\t\t\t\tself.gantt_start = item._start;\r\n\t\t\t\t}\r\n\t\t\t\tif (!self.gantt_end || item._end > self.gantt_end) {\r\n\t\t\t\t\tself.gantt_end = item._end;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tset_gantt_dates();\r\n\t\tsetup_dates();\r\n\t}\r\n\r\n\tfunction prepare_canvas() {\r\n\t\tif (self.canvas) return;\r\n\t\tself.canvas = Snap(self.element).addClass('gantt');\r\n\t}\r\n\r\n\tfunction render() {\r\n\t\tclear();\r\n\t\tsetup_groups();\r\n\t\tmake_grid();\r\n\t\tmake_dates();\r\n\t\tmake_bars();\r\n\t\tmake_arrows();\r\n\t\tmap_arrows_on_bars();\r\n\t\tset_width();\r\n\t\tset_scroll_position();\r\n\t\tbind_grid_click();\r\n\t}\r\n\r\n\tfunction clear() {\r\n\t\tself.canvas.clear();\r\n\t\tself._bars = [];\r\n\t\tself._arrows = [];\r\n\t}\r\n\r\n\tfunction set_gantt_dates() {\r\n\r\n\t\tif (view_is(['Quarter Day', 'Half Day'])) {\r\n\t\t\tself.gantt_start = self.gantt_start.clone().subtract(7, 'day');\r\n\t\t\tself.gantt_end = self.gantt_end.clone().add(7, 'day');\r\n\t\t} else if (view_is('Month')) {\r\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('year');\r\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'year');\r\n\t\t} else {\r\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('month').subtract(1, 'month');\r\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'month');\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setup_dates() {\r\n\r\n\t\tself.dates = [];\r\n\t\tlet cur_date = null;\r\n\r\n\t\twhile (cur_date === null || cur_date < self.gantt_end) {\r\n\t\t\tif (!cur_date) {\r\n\t\t\t\tcur_date = self.gantt_start.clone();\r\n\t\t\t} else {\r\n\t\t\t\tcur_date = view_is('Month') ?\r\n\t\t\t\t\tcur_date.clone().add(1, 'month') :\r\n\t\t\t\t\tcur_date.clone().add(self.config.step, 'hours');\r\n\t\t\t}\r\n\t\t\tself.dates.push(cur_date);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction setup_groups() {\r\n\r\n\t\tconst groups = ['grid', 'date', 'arrow', 'progress', 'bar', 'details'];\r\n\t\t// make group layers\r\n\t\tfor (let group of groups) {\r\n\t\t\tself.element_groups[group] = self.canvas.group().attr({ 'id': group });\r\n\t\t}\r\n\t}\r\n\r\n\tfunction set_scale(scale) {\r\n\t\tself.config.view_mode = scale;\r\n\r\n\t\tif (scale === 'Hour') {\r\n\t\t\tself.config.step = 1;\r\n\t\t\tself.config.column_width = 18;\r\n\t\t} else if (scale === 'Day') {\r\n\t\t\tself.config.step = 24;\r\n\t\t\tself.config.column_width = 38;\r\n\t\t} else if (scale === 'Half Day') {\r\n\t\t\tself.config.step = 24 / 2;\r\n\t\t\tself.config.column_width = 38;\r\n\t\t} else if (scale === 'Quarter Day') {\r\n\t\t\tself.config.step = 24 / 4;\r\n\t\t\tself.config.column_width = 38;\r\n\t\t} else if (scale === 'Week') {\r\n\t\t\tself.config.step = 24 * 7;\r\n\t\t\tself.config.column_width = 140;\r\n\t\t} else if (scale === 'Month') {\r\n\t\t\tself.config.step = 24 * 30;\r\n\t\t\tself.config.column_width = 120;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction set_width() {\r\n\t\tconst cur_width = self.canvas.node.getBoundingClientRect().width;\r\n\t\tconst actual_width = self.canvas.select('#grid .grid-row').attr('width');\r\n\t\tif (cur_width < actual_width) {\r\n\t\t\tself.canvas.attr('width', actual_width);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction set_scroll_position() {\r\n\t\tconst parent_element = self.element.parentElement;\r\n\r\n\t\tif (!parent_element) return;\r\n\r\n\t\tconst scroll_pos = get_min_date().diff(self.gantt_start, 'hours') /\r\n\t\t\tself.config.step * self.config.column_width - self.config.column_width;\r\n\t\tparent_element.scrollLeft = scroll_pos;\r\n\t}\r\n\r\n\tfunction get_min_date() {\r\n\t\tvar flattenTasks = [].concat(...self.tasks); // flatten multi-dimensional array\r\n\r\n\t\tconst task = flattenTasks.reduce((acc, curr) => {\r\n\t\t\t// console.log(curr[0]);\r\n\t\t\treturn curr._start.isSameOrBefore(acc._start) ? curr : acc;\r\n\t\t});\r\n\t\treturn task._start;\r\n\t}\r\n\r\n\tfunction make_grid() {\r\n\t\tmake_grid_background();\r\n\t\tmake_grid_rows();\r\n\t\tmake_grid_header();\r\n\t\tmake_grid_ticks();\r\n\t\tmake_grid_highlights();\r\n\t}\r\n\r\n\tfunction make_grid_background() {\r\n\r\n\t\tconst grid_width = self.dates.length * self.config.column_width,\r\n\t\t\tgrid_height = self.config.header_height + self.config.padding +\r\n\t\t\t\t(self.config.bar.height + self.config.padding) * self.tasks.length;\r\n\r\n\t\tself.canvas.rect(0, 0, grid_width, grid_height)\r\n\t\t\t.addClass('grid-background')\r\n\t\t\t.appendTo(self.element_groups.grid);\r\n\r\n\t\tself.canvas.attr({\r\n\t\t\theight: grid_height + self.config.padding + 100,\r\n\t\t\twidth: '100%'\r\n\t\t});\r\n\t}\r\n\r\n\tfunction make_grid_header() {\r\n\t\tconst header_width = self.dates.length * self.config.column_width,\r\n\t\t\theader_height = self.config.header_height + 10;\r\n\t\tself.canvas.rect(0, 0, header_width, header_height)\r\n\t\t\t.addClass('grid-header')\r\n\t\t\t.appendTo(self.element_groups.grid);\r\n\t}\r\n\r\n\tfunction make_grid_rows() {\r\n\r\n\t\tconst rows = self.canvas.group().appendTo(self.element_groups.grid),\r\n\t\t\tlines = self.canvas.group().appendTo(self.element_groups.grid),\r\n\t\t\trow_width = self.dates.length * self.config.column_width,\r\n\t\t\trow_height = self.config.bar.height + self.config.padding;\r\n\r\n\t\tlet row_y = self.config.header_height + self.config.padding / 2;\r\n\r\n\t\t// for(let task of self.tasks) { // eslint-disable-line\r\n\t\tself.tasks.forEach(function (task, i) {\r\n\t\t\tself.canvas.rect(0, row_y, row_width, row_height)\r\n\t\t\t\t.attr({ id: i })\r\n\t\t\t\t.addClass('grid-row')\r\n\t\t\t\t.appendTo(rows);\r\n\r\n\t\t\tself.canvas.line(0, row_y + row_height, row_width, row_y + row_height)\r\n\t\t\t\t.addClass('row-line')\r\n\t\t\t\t.appendTo(lines);\r\n\r\n\t\t\trow_y += self.config.bar.height + self.config.padding;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction make_grid_ticks() {\r\n\t\tlet tick_x = 0,\r\n\t\t\ttick_y = self.config.header_height + self.config.padding / 2,\r\n\t\t\ttick_height = (self.config.bar.height + self.config.padding) * self.tasks.length;\r\n\r\n\t\tfor (let date of self.dates) {\r\n\t\t\tlet tick_class = 'tick';\r\n\t\t\t// thick tick for monday\r\n\t\t\tif (view_is('Day') && date.day() === 1) {\r\n\t\t\t\ttick_class += ' thick';\r\n\t\t\t}\r\n\t\t\t// thick tick for first week\r\n\t\t\tif (view_is('Week') && date.date() >= 1 && date.date() < 8) {\r\n\t\t\t\ttick_class += ' thick';\r\n\t\t\t}\r\n\t\t\t// thick ticks for quarters\r\n\t\t\tif (view_is('Month') && date.month() % 3 === 0) {\r\n\t\t\t\ttick_class += ' thick';\r\n\t\t\t}\r\n\r\n\t\t\tself.canvas.path(Snap.format('M {x} {y} v {height}', {\r\n\t\t\t\tx: tick_x,\r\n\t\t\t\ty: tick_y,\r\n\t\t\t\theight: tick_height\r\n\t\t\t}))\r\n\t\t\t\t.addClass(tick_class)\r\n\t\t\t\t.appendTo(self.element_groups.grid);\r\n\r\n\t\t\tif (view_is('Month')) {\r\n\t\t\t\ttick_x += date.daysInMonth() * self.config.column_width / 30;\r\n\t\t\t} else {\r\n\t\t\t\ttick_x += self.config.column_width;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction make_grid_highlights() {\r\n\r\n\t\t// highlight today's date\r\n\t\tif (view_is('Day')) {\r\n\t\t\tconst x = moment().startOf('day').diff(self.gantt_start, 'hours') /\r\n\t\t\t\tself.config.step * self.config.column_width;\r\n\t\t\tconst y = 0;\r\n\t\t\tconst width = self.config.column_width;\r\n\t\t\tconst height = (self.config.bar.height + self.config.padding) * self.tasks.length +\r\n\t\t\t\tself.config.header_height + self.config.padding / 2;\r\n\r\n\t\t\tself.canvas.rect(x, y, width, height)\r\n\t\t\t\t.addClass('today-highlight')\r\n\t\t\t\t.appendTo(self.element_groups.grid);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction make_dates() {\r\n\t\tfor (let date of get_dates_to_draw()) {\r\n\t\t\tself.canvas.text(date.lower_x, date.lower_y, date.lower_text)\r\n\t\t\t\t.addClass('lower-text')\r\n\t\t\t\t.appendTo(self.element_groups.date);\r\n\r\n\t\t\tif (date.upper_text) {\r\n\t\t\t\tconst $upper_text = self.canvas.text(date.upper_x, date.upper_y, date.upper_text)\r\n\t\t\t\t\t.addClass('upper-text')\r\n\t\t\t\t\t.appendTo(self.element_groups.date);\r\n\r\n\t\t\t\t// remove out-of-bound dates\r\n\t\t\t\tif ($upper_text.getBBox().x2 > self.element_groups.grid.getBBox().width) {\r\n\t\t\t\t\t$upper_text.remove();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction get_dates_to_draw() {\r\n\t\tlet last_date = null;\r\n\t\tconst dates = self.dates.map((date, i) => {\r\n\t\t\tconst d = get_date_info(date, last_date, i);\r\n\t\t\tlast_date = date;\r\n\t\t\treturn d;\r\n\t\t});\r\n\t\treturn dates;\r\n\t}\r\n\r\n\tfunction get_date_info(date, last_date, i) {\r\n\t\tif (!last_date) {\r\n\t\t\tlast_date = date.clone().add(1, 'year');\r\n\t\t}\r\n\t\tconst date_text = {\r\n\t\t\t'Minute_lower': date.format('HH'),\r\n\t\t\t'Hour_lower': date.format('HH'),\r\n\t\t\t'Quarter Day_lower': date.format('HH'),\r\n\t\t\t'Half Day_lower': date.format('HH'),\r\n\t\t\t'Day_lower': date.date() !== last_date.date() ? date.format('D') : '',\r\n\t\t\t'Week_lower': date.month() !== last_date.month() ?\r\n\t\t\t\tdate.format('D MMM') : date.format('D'),\r\n\t\t\t'Month_lower': date.format('MMMM'),\r\n\t\t\t'Minute_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\r\n\t\t\t'Hour_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\r\n\t\t\t'Quarter Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\r\n\t\t\t'Half Day_upper': date.date() !== last_date.date() ?\r\n\t\t\t\tdate.month() !== last_date.month() ?\r\n\t\t\t\t\tdate.format('D MMM') : date.format('D') : '',\r\n\t\t\t'Day_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\r\n\t\t\t'Week_upper': date.month() !== last_date.month() ? date.format('MMMM') : '',\r\n\t\t\t'Month_upper': date.year() !== last_date.year() ? date.format('YYYY') : ''\r\n\t\t};\r\n\r\n\t\tconst base_pos = {\r\n\t\t\tx: i * self.config.column_width,\r\n\t\t\tlower_y: self.config.header_height,\r\n\t\t\tupper_y: self.config.header_height - 25\r\n\t\t};\r\n\r\n\t\tconst x_pos = {\r\n\t\t\t'Minute_lower': (self.config.column_width * 1440) / 2,\r\n\t\t\t'Minute_upper': 0,\r\n\t\t\t'Hour_lower': (self.config.column_width * 24) / 2,\r\n\t\t\t'Hour_upper': 0,\r\n\t\t\t'Quarter Day_lower': (self.config.column_width * 4) / 2,\r\n\t\t\t'Quarter Day_upper': 0,\r\n\t\t\t'Half Day_lower': (self.config.column_width * 2) / 2,\r\n\t\t\t'Half Day_upper': 0,\r\n\t\t\t'Day_lower': self.config.column_width / 2,\r\n\t\t\t'Day_upper': (self.config.column_width * 30) / 2,\r\n\t\t\t'Week_lower': 0,\r\n\t\t\t'Week_upper': (self.config.column_width * 4) / 2,\r\n\t\t\t'Month_lower': self.config.column_width / 2,\r\n\t\t\t'Month_upper': (self.config.column_width * 12) / 2\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tupper_text: date_text[`${self.config.view_mode}_upper`],\r\n\t\t\tlower_text: date_text[`${self.config.view_mode}_lower`],\r\n\t\t\tupper_x: base_pos.x + x_pos[`${self.config.view_mode}_upper`],\r\n\t\t\tupper_y: base_pos.upper_y,\r\n\t\t\tlower_x: base_pos.x + x_pos[`${self.config.view_mode}_lower`],\r\n\t\t\tlower_y: base_pos.lower_y\r\n\t\t};\r\n\t}\r\n\r\n\tfunction make_arrows() {\r\n\t\tvar flattenTasks = [].concat(...self.tasks); // flatten multi-dimensional array\r\n\t\tself._arrows = [];\r\n\t\tfor (let task of flattenTasks) {\r\n\t\t\t// console.log(task);\r\n\t\t\tlet arrows = [];\r\n\t\t\tarrows = task.dependencies.map(dep => {\r\n\t\t\t\tconst dependency = get_task(dep);\r\n\t\t\t\tconsole.log(self._bars);\r\n\t\t\t\tif (!dependency) return;\r\n\r\n\t\t\t\tconst arrow = Arrow(\r\n\t\t\t\t\tself, // gt\r\n\t\t\t\t\tself._bars[dependency._index][dependency._index_sub], // from_task\r\n\t\t\t\t\tself._bars[task._index][dependency._index_sub] // to_task\r\n\t\t\t\t);\r\n\t\t\t\tself.element_groups.arrow.add(arrow.element);\r\n\t\t\t\treturn arrow; // eslint-disable-line\r\n\t\t\t}).filter(arr => arr); // filter falsy values\r\n\t\t\tself._arrows = self._arrows.concat(arrows);\r\n\t\t}\r\n\t\tconsole.log(self._arrows);\r\n\t}\r\n\r\n\tfunction make_bars() {\r\n\t\tself._bars = self.tasks.map((run) => {\r\n\t\t\tvar run_items = run.map((item) => {\r\n\t\t\t\tconst bar = Octogon(self, item);\r\n\t\t\t\tself.element_groups.bar.add(bar.group);\r\n\t\t\t\treturn bar;\r\n\t\t\t});\r\n\t\t\treturn run_items;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction map_arrows_on_bars() {\r\n\t\tvar flattenBars = [].concat(...self._bars);\r\n\t\tfor (let bar of flattenBars) {\r\n\t\t\tbar.arrows = self._arrows.filter(arrow => {\r\n\t\t\t\tconsole.log(bar);\r\n\t\t\t\treturn (arrow.from_task.task.id === bar.task.id) ||\r\n\t\t\t\t\t(arrow.to_task.task.id === bar.task.id);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction bind_grid_click() {\r\n\t\tself.element_groups.grid.click(() => {\r\n\t\t\tunselect_all();\r\n\t\t\tself.element_groups.details\r\n\t\t\t\t.selectAll('.details-wrapper')\r\n\t\t\t\t.forEach(el => el.addClass('hide'));\r\n\t\t});\r\n\t}\r\n\r\n\tfunction unselect_all() {\r\n\t\tself.canvas.selectAll('.bar-wrapper').forEach(el => {\r\n\t\t\tel.removeClass('active');\r\n\t\t});\r\n\t}\r\n\r\n\tfunction view_is(modes) {\r\n\t\tif (typeof modes === 'string') {\r\n\t\t\treturn self.config.view_mode === modes;\r\n\t\t} else if (Array.isArray(modes)) {\r\n\t\t\tfor (let mode of modes) {\r\n\t\t\t\tif (self.config.view_mode === mode) return true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction get_task(id) {\r\n\t\tvar flattenTasks = [].concat(...self.tasks); // flatten multi-dimensional array\r\n\t\treturn flattenTasks.find((task) => {\r\n\t\t\treturn task.id === id;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction get_bar(id) {\r\n\t\tvar flattenBars = [].concat(...self._bars);\r\n\t\treturn flattenBars.find((bar) => {\r\n\t\t\treturn bar.task.id === id;\r\n\t\t});\r\n\t}\r\n\r\n\tfunction generate_id(task) {\r\n\t\treturn task.name + '_' + Math.random().toString(36).slice(2, 12);\r\n\t}\r\n\r\n\tfunction trigger_event(event, args) {\r\n\t\tif (self.config['on_' + event]) {\r\n\t\t\tself.config['on_' + event].apply(null, args);\r\n\t\t}\r\n\t}\r\n\r\n\tinit();\r\n\r\n\treturn self;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/walters_l/Documents/Repos/Gantt-frappe/~/eslint-loader!./src/Gantt.js\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/index.js?sourceMap!./gantt.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/gantt.scss\n ** module id = 1\n ** module chunks = 0\n **/","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".gantt .grid-background {\\n  fill: none; }\\n\\n.gantt .grid-header {\\n  fill: #ffffff;\\n  stroke: #e0e0e0;\\n  stroke-width: 1.4; }\\n\\n.gantt .grid-row {\\n  fill: #ffffff; }\\n\\n.gantt .grid-row:nth-child(even) {\\n  fill: #f5f5f5; }\\n\\n.gantt .row-line {\\n  stroke: #ebeff2; }\\n\\n.gantt .tick {\\n  stroke: #e0e0e0;\\n  stroke-width: 0.2; }\\n  .gantt .tick.thick {\\n    stroke-width: 0.4; }\\n\\n.gantt .today-highlight {\\n  fill: yellow;\\n  opacity: 0.5; }\\n\\n.gantt #arrow {\\n  fill: none;\\n  stroke: #666;\\n  stroke-width: 1.4; }\\n\\n.gantt .bar {\\n  fill: #b8c2cc;\\n  stroke: #8D99A6;\\n  stroke-width: 0;\\n  transition: stroke-width .3s ease; }\\n\\n.gantt .bar-progress {\\n  fill: #a3a3ff; }\\n\\n.gantt .bar-invalid {\\n  fill: transparent;\\n  stroke: #8D99A6;\\n  stroke-width: 1;\\n  stroke-dasharray: 5; }\\n  .gantt .bar-invalid ~ .bar-label {\\n    fill: #555; }\\n\\n.gantt .bar-label {\\n  fill: #fff;\\n  dominant-baseline: central;\\n  text-anchor: middle;\\n  font-size: 12px;\\n  font-weight: lighter; }\\n  .gantt .bar-label.big {\\n    fill: #555;\\n    text-anchor: start; }\\n\\n.gantt .handle {\\n  fill: #ddd;\\n  cursor: ew-resize;\\n  opacity: 0;\\n  visibility: hidden;\\n  transition: opacity .3s ease; }\\n\\n.gantt .bar-wrapper {\\n  cursor: pointer; }\\n  .gantt .bar-wrapper:hover .bar {\\n    stroke-width: 2; }\\n  .gantt .bar-wrapper:hover .handle {\\n    visibility: visible;\\n    opacity: 1; }\\n  .gantt .bar-wrapper.active .bar {\\n    stroke-width: 2; }\\n\\n.gantt .lower-text, .gantt .upper-text {\\n  font-size: 12px;\\n  text-anchor: middle; }\\n\\n.gantt .upper-text {\\n  fill: #555; }\\n\\n.gantt .lower-text {\\n  fill: #333; }\\n\\n.gantt #details .details-container {\\n  background: #fff;\\n  display: inline-block;\\n  padding: 12px; }\\n  .gantt #details .details-container h5, .gantt #details .details-container p {\\n    margin: 0; }\\n  .gantt #details .details-container h5 {\\n    font-size: 12px;\\n    font-weight: bold;\\n    margin-bottom: 10px;\\n    color: #555; }\\n  .gantt #details .details-container p {\\n    font-size: 12px;\\n    margin-bottom: 6px;\\n    color: #666; }\\n  .gantt #details .details-container p:last-child {\\n    margin-bottom: 0; }\\n\\n.gantt .hide {\\n  display: none; }\\n\", \"\", {\"version\":3,\"sources\":[\"C:/Users/walters_l/Documents/Repos/Gantt-frappe/src/src\\\\gantt.scss\"],\"names\":[],\"mappings\":\"AAYA;EAGE,WAAU,EACV;;AAJF;EAME,cAAa;EACb,gBAjBoB;EAkBpB,kBAAiB,EACjB;;AATF;EAWE,cAAa,EACb;;AAZF;EAcE,cAvBgB,EAwBhB;;AAfF;EAiBE,gBAzB0B,EA0B1B;;AAlBF;EAoBE,gBA9BoB;EA+BpB,kBAAiB,EAIjB;EAzBF;IAuBG,kBAAiB,EACjB;;AAxBH;EA2BE,aAlCmB;EAmCnB,aAAY,EACZ;;AA7BF;EAgCE,WAAU;EACV,aAvCe;EAwCf,kBAAiB,EACjB;;AAnCF;EAsCE,cAlDiB;EAmDjB,gBAlDkB;EAmDlB,gBAAe;EACf,kCAAiC,EACjC;;AA1CF;EA4CE,cA/CY,EAgDZ;;AA7CF;EA+CE,kBAAiB;EACjB,gBA3DkB;EA4DlB,gBAAe;EACf,oBAAmB,EAKnB;EAvDF;IAqDG,WA1Dc,EA2Dd;;AAtDH;EAyDE,WAAU;EACV,2BAA0B;EAC1B,oBAAmB;EACnB,gBAAe;EACf,qBAAoB,EAMpB;EAnEF;IAgEG,WArEc;IAsEd,mBAAkB,EAClB;;AAlEH;EAsEE,WAxEiB;EAyEjB,kBAAiB;EACjB,WAAU;EACV,mBAAkB;EAClB,6BAA4B,EAC5B;;AA3EF;EA8EE,gBAAe,EAkBf;EAhGF;IAkFI,gBAAe,EACf;EAnFJ;IAsFI,oBAAmB;IACnB,WAAU,EACV;EAxFJ;IA6FI,gBAAe,EACf;;AA9FJ;EAmGE,gBAAe;EACf,oBAAmB,EACnB;;AArGF;EAuGE,WA5Ge,EA6Gf;;AAxGF;EA0GE,WA9Ge,EA+Gf;;AA3GF;EA8GE,iBAAgB;EAChB,sBAAqB;EACrB,cAAa,EAsBb;EAtIF;IAmHG,UAAS,EACT;EApHH;IAuHG,gBAAe;IACf,kBAAiB;IACjB,oBAAmB;IACnB,YA/Hc,EAgId;EA3HH;IA8HG,gBAAe;IACf,mBAAkB;IAClB,YAtIc,EAuId;EAjIH;IAoIG,iBAAgB,EAChB;;AArIH;EAyIE,cAAa,EACb\",\"file\":\"gantt.scss\",\"sourcesContent\":[\"$bar-color: #b8c2cc;\\r\\n$bar-stroke: #8D99A6;\\r\\n$border-color: #e0e0e0;\\r\\n$light-bg: #f5f5f5;\\r\\n$light-border-color: #ebeff2;\\r\\n$light-yellow: yellow;\\r\\n$text-muted: #666;\\r\\n$text-light: #555;\\r\\n$text-color: #333;\\r\\n$blue: #a3a3ff;\\r\\n$handle-color: #ddd;\\r\\n\\r\\n.gantt {\\r\\n\\r\\n\\t.grid-background {\\r\\n\\t\\tfill: none;\\r\\n\\t}\\r\\n\\t.grid-header {\\r\\n\\t\\tfill: #ffffff;\\r\\n\\t\\tstroke: $border-color;\\r\\n\\t\\tstroke-width: 1.4;\\r\\n\\t}\\r\\n\\t.grid-row {\\r\\n\\t\\tfill: #ffffff;\\r\\n\\t}\\r\\n\\t.grid-row:nth-child(even) {\\r\\n\\t\\tfill: $light-bg;\\r\\n\\t}\\r\\n\\t.row-line {\\r\\n\\t\\tstroke: $light-border-color;\\r\\n\\t}\\r\\n\\t.tick {\\r\\n\\t\\tstroke: $border-color;\\r\\n\\t\\tstroke-width: 0.2;\\r\\n\\t\\t&.thick {\\r\\n\\t\\t\\tstroke-width: 0.4;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\t.today-highlight {\\r\\n\\t\\tfill: $light-yellow;\\r\\n\\t\\topacity: 0.5;\\r\\n\\t}\\r\\n\\r\\n\\t#arrow {\\r\\n\\t\\tfill: none;\\r\\n\\t\\tstroke: $text-muted;\\r\\n\\t\\tstroke-width: 1.4;\\r\\n\\t}\\r\\n\\r\\n\\t.bar {\\r\\n\\t\\tfill: $bar-color;\\r\\n\\t\\tstroke: $bar-stroke;\\r\\n\\t\\tstroke-width: 0;\\r\\n\\t\\ttransition: stroke-width .3s ease;\\r\\n\\t}\\r\\n\\t.bar-progress {\\r\\n\\t\\tfill: $blue;\\r\\n\\t}\\r\\n\\t.bar-invalid {\\r\\n\\t\\tfill: transparent;\\r\\n\\t\\tstroke: $bar-stroke;\\r\\n\\t\\tstroke-width: 1;\\r\\n\\t\\tstroke-dasharray: 5;\\r\\n\\r\\n\\t\\t&~.bar-label {\\r\\n\\t\\t\\tfill: $text-light;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\t.bar-label {\\r\\n\\t\\tfill: #fff;\\r\\n\\t\\tdominant-baseline: central;\\r\\n\\t\\ttext-anchor: middle;\\r\\n\\t\\tfont-size: 12px;\\r\\n\\t\\tfont-weight: lighter;\\r\\n\\r\\n\\t\\t&.big {\\r\\n\\t\\t\\tfill: $text-light;\\r\\n\\t\\t\\ttext-anchor: start;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t.handle {\\r\\n\\t\\tfill: $handle-color;\\r\\n\\t\\tcursor: ew-resize;\\r\\n\\t\\topacity: 0;\\r\\n\\t\\tvisibility: hidden;\\r\\n\\t\\ttransition: opacity .3s ease;\\r\\n\\t}\\r\\n\\r\\n\\t.bar-wrapper {\\r\\n\\t\\tcursor: pointer;\\r\\n\\r\\n\\t\\t&:hover {\\r\\n\\t\\t\\t.bar {\\r\\n\\t\\t\\t\\tstroke-width: 2;\\r\\n\\t\\t\\t}\\r\\n\\r\\n\\t\\t\\t.handle {\\r\\n\\t\\t\\t\\tvisibility: visible;\\r\\n\\t\\t\\t\\topacity: 1;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\t&.active {\\r\\n\\t\\t\\t.bar {\\r\\n\\t\\t\\t\\tstroke-width: 2;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t.lower-text, .upper-text {\\r\\n\\t\\tfont-size: 12px;\\r\\n\\t\\ttext-anchor: middle;\\r\\n\\t}\\r\\n\\t.upper-text {\\r\\n\\t\\tfill: $text-light;\\r\\n\\t}\\r\\n\\t.lower-text {\\r\\n\\t\\tfill: $text-color;\\r\\n\\t}\\r\\n\\r\\n\\t#details .details-container {\\r\\n\\t\\tbackground: #fff;\\r\\n\\t\\tdisplay: inline-block;\\r\\n\\t\\tpadding: 12px;\\r\\n\\r\\n\\t\\th5, p {\\r\\n\\t\\t\\tmargin: 0;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\th5 {\\r\\n\\t\\t\\tfont-size: 12px;\\r\\n\\t\\t\\tfont-weight: bold;\\r\\n\\t\\t\\tmargin-bottom: 10px;\\r\\n\\t\\t\\tcolor: $text-light;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tp {\\r\\n\\t\\t\\tfont-size: 12px;\\r\\n\\t\\t\\tmargin-bottom: 6px;\\r\\n\\t\\t\\tcolor: $text-muted;\\r\\n\\t\\t}\\r\\n\\r\\n\\t\\tp:last-child {\\r\\n\\t\\t\\tmargin-bottom: 0;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\r\\n\\t.hide {\\r\\n\\t\\tdisplay: none;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader?sourceMap!./~/sass-loader?sourceMap!./src/gantt.scss\n ** module id = 2\n ** module chunks = 0\n **/","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function() {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\tvar result = [];\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar item = this[i];\n\t\t\tif(item[2]) {\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\n\t\t\t} else {\n\t\t\t\tresult.push(item[1]);\n\t\t\t}\n\t\t}\n\t\treturn result.join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 3\n ** module chunks = 0\n **/","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\treturn /msie [6-9]\\b/.test(self.navigator.userAgent.toLowerCase());\n\t}),\n\tgetHeadElement = memoize(function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [];\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the bottom of <head>.\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar head = getHeadElement();\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\thead.insertBefore(styleElement, head.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\thead.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\thead.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\tstyleElement.type = \"text/css\";\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\tlinkElement.rel = \"stylesheet\";\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 4\n ** module chunks = 0\n **/","/* global Snap */\r\n/*\r\n\tClass: Octogon\r\n\r\n\tOpts:\r\n\t\tgt: Gantt object\r\n\t\ttask: task object\r\n*/\r\n\r\n\r\n// https://codepen.io/anon/pen/OOKqPW?editors=0010\r\n\r\nimport { debounce } from './Utils';\r\n\r\nexport default function Octogon(gt, task) {\r\n\r\n\tconst self = {};\r\n\tconst oct = {};\r\n\r\n\tfunction init() {\r\n\t\tset_defaults();\r\n\t\tprepare();\r\n\t\tdraw();\r\n\t\tbind();\r\n\t}\r\n\r\n\tfunction set_defaults() {\r\n\t\tself.action_completed = false;\r\n\t\tself.task = task;\r\n\t}\r\n\r\n\tfunction prepare() {\r\n\t\tprepare_values();\r\n\t\tprepare_plugins();\r\n\t}\r\n\r\n\tfunction prepare_values() {\r\n\t\tself.invalid = self.task.invalid;\r\n\t\tself.height = gt.config.bar.height;\r\n\t\tself.x = compute_x();\r\n\t\tself.y = compute_y();\r\n\t\tself.corner_radius = 3;\r\n\t\tself.duration = (self.task._end.diff(self.task._start, 'hours') + 24) / gt.config.step;\r\n\t\tself.width = gt.config.column_width * self.duration;\r\n\t\tself.progress_width = gt.config.column_width * self.duration * (self.task.progress / 100) || 0;\r\n\t\tself.group = gt.canvas.group().addClass('bar-wrapper').addClass(self.task.custom_class || '');\r\n\t\tself.bar_group = gt.canvas.group().addClass('bar-group').appendTo(self.group);\r\n\t\tself.handle_group = gt.canvas.group().addClass('handle-group').appendTo(self.group);\r\n\r\n\t\tself.join = 10;\r\n\t\tself.joinheight = self.height - (self.join * 2);\r\n\t}\r\n\r\n\tfunction setPolygon(pWidth) {\r\n\t\toct.x1 = 0;\r\n\t\toct.y1 = self.join;\r\n\t\toct.x2 = self.join;\r\n\t\toct.y2 = 0;\r\n\t\toct.x3 = (pWidth - (self.join * 1));\r\n\t\toct.x4 = pWidth;\r\n\t\toct.y4 = self.join;\r\n\t\toct.y5 = self.joinheight + self.join;\r\n\t\toct.y6 = self.joinheight + (self.join * 2);\r\n\t}\r\n\r\n\tfunction prepare_plugins() {\r\n\t\tSnap.plugin(function (Snap, Element, Paper, global, Fragment) {\r\n\t\t\tElement.prototype.getX = function () {\r\n\t\t\t\treturn +this.attr('x');\r\n\t\t\t};\r\n\t\t\tElement.prototype.getY = function () {\r\n\t\t\t\treturn +this.attr('y');\r\n\t\t\t};\r\n\t\t\tElement.prototype.getWidth = function () {\r\n\t\t\t\treturn +this.attr('width');\r\n\t\t\t};\r\n\t\t\tElement.prototype.getHeight = function () {\r\n\t\t\t\treturn +this.attr('height');\r\n\t\t\t};\r\n\t\t\tElement.prototype.getEndX = function () {\r\n\t\t\t\treturn this.getX() + this.getWidth();\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tfunction draw() {\r\n\t\tdraw_bar();\r\n\t\tdraw_progress_bar();\r\n\t\tdraw_label();\r\n\t\tdraw_resize_handles();\r\n\t}\r\n\r\n\tfunction drawInnerOctogon() {\r\n\t\tsetPolygon(self.width);\r\n\t\tself.$barOct = gt.canvas.polygon(\r\n\t\t\tSnap.format(`{oct.x1},{oct.y1} {oct.x2},{oct.y2} {oct.x3},{oct.y2} {oct.x4},{oct.y4}\r\n\t\t\t{oct.x4},{oct.y5} {oct.x3},{oct.y6} {oct.x2},{oct.y6} {oct.x1},{oct.y5}`, oct))\r\n\t\t\t.addClass('bar')\r\n\t\t\t.appendTo(self.$bar);\r\n\t}\r\n\r\n\tfunction updateInnerOctogon(w) {\r\n\t\tsetPolygon(w);\r\n\t\tconst pts = Snap.format(`{oct.x1},{oct.y1} {oct.x2},{oct.y2} {oct.x3},{oct.y2} {oct.x4},{oct.y4}\r\n\t\t{oct.x4},{oct.y5} {oct.x3},{oct.y6} {oct.x2},{oct.y6} {oct.x1},{oct.y5}`, oct).replace(/ /g, ',').split(',');\r\n\t\t// const ptNums = pts.map(Number); // convert all array strings to numbers\r\n\t\tself.$barOct.animate({ 'points': pts }, 1); // 0 duration breaks on FF62\r\n\t}\r\n\r\n\tfunction draw_bar() {\r\n\t\tself.$bar = gt.canvas.svg(self.x, self.y, self.width, self.height)\r\n\t\t\t.appendTo(self.bar_group);\r\n\r\n\t\tdrawInnerOctogon();\r\n\r\n\t\tif (self.invalid) {\r\n\t\t\tself.$bar.addClass('bar-invalid');\r\n\t\t}\r\n\t}\r\n\r\n\tfunction draw_progress_bar() {\r\n\t\tif (self.invalid) return;\r\n\t\tself.$bar_progress = gt.canvas.rect(self.x, self.y,\r\n\t\t\tself.progress_width, self.height,\r\n\t\t\tself.corner_radius, self.corner_radius)\r\n\t\t\t.addClass('bar-progress')\r\n\t\t\t.appendTo(self.bar_group);\r\n\t}\r\n\r\n\tfunction draw_label() {\r\n\t\tgt.canvas.text(self.x + self.width / 2,\r\n\t\t\tself.y + self.height / 2,\r\n\t\t\tself.task.name)\r\n\t\t\t.addClass('bar-label')\r\n\t\t\t.appendTo(self.bar_group);\r\n\t\tupdate_label_position();\r\n\t}\r\n\r\n\tfunction draw_resize_handles() {\r\n\t\tif (self.invalid) return;\r\n\r\n\t\tconst bar = self.$bar,\r\n\t\t\thandle_width = 8;\r\n\r\n\t\tgt.canvas.rect(bar.getX() + bar.getWidth() - 9, bar.getY() + 1,\r\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\r\n\t\t\t.addClass('handle right')\r\n\t\t\t.appendTo(self.handle_group);\r\n\t\tgt.canvas.rect(bar.getX() + 1, bar.getY() + 1,\r\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\r\n\t\t\t.addClass('handle left')\r\n\t\t\t.appendTo(self.handle_group);\r\n\r\n\t\tif (self.task.progress && self.task.progress < 100) {\r\n\t\t\tgt.canvas.polygon(get_progress_polygon_points())\r\n\t\t\t\t.addClass('handle progress')\r\n\t\t\t\t.appendTo(self.handle_group);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction get_progress_polygon_points() {\r\n\t\tconst bar_progress = self.$bar_progress;\r\n\t\treturn [\r\n\t\t\tbar_progress.getEndX() - 5, bar_progress.getY() + bar_progress.getHeight(),\r\n\t\t\tbar_progress.getEndX() + 5, bar_progress.getY() + bar_progress.getHeight(),\r\n\t\t\tbar_progress.getEndX(), bar_progress.getY() + bar_progress.getHeight() - 8.66\r\n\t\t];\r\n\t}\r\n\r\n\tfunction bind() {\r\n\t\tif (self.invalid) return;\r\n\t\tsetup_click_event();\r\n\t\tshow_details();\r\n\t\tbind_resize();\r\n\t\tbind_drag();\r\n\t\tbind_resize_progress();\r\n\t}\r\n\r\n\tfunction show_details() {\r\n\t\tconst popover_group = gt.element_groups.details;\r\n\t\tself.details_box = popover_group\r\n\t\t\t.select(`.details-wrapper[data-task='${self.task.id}']`);\r\n\r\n\t\tif (!self.details_box) {\r\n\t\t\tself.details_box = gt.canvas.group()\r\n\t\t\t\t.addClass('details-wrapper hide')\r\n\t\t\t\t.attr('data-task', self.task.id)\r\n\t\t\t\t.appendTo(popover_group);\r\n\r\n\t\t\trender_details();\r\n\r\n\t\t\tconst f = gt.canvas.filter(\r\n\t\t\t\tSnap.filter.shadow(0, 1, 1, '#666', 0.6));\r\n\t\t\tself.details_box.attr({\r\n\t\t\t\tfilter: f\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tself.group.click((e) => {\r\n\t\t\tif (self.action_completed) {\r\n\t\t\t\t// just finished a move action, wait for a few seconds\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tpopover_group.selectAll('.details-wrapper')\r\n\t\t\t\t.forEach(el => el.addClass('hide'));\r\n\t\t\tself.details_box.removeClass('hide');\r\n\t\t});\r\n\t}\r\n\r\n\tfunction render_details() {\r\n\t\tconst { x, y } = get_details_position();\r\n\t\tself.details_box.transform(`t${x},${y}`);\r\n\t\tself.details_box.clear();\r\n\r\n\t\tconst html = get_details_html();\r\n\t\tconst foreign_object =\r\n\t\t\tSnap.parse(`<foreignObject width=\"5000\" height=\"2000\">\r\n\t\t\t\t<body xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t\t\t\t\t${html}\r\n\t\t\t\t</body>\r\n\t\t\t\t</foreignObject>`);\r\n\t\tself.details_box.append(foreign_object);\r\n\t}\r\n\r\n\tfunction get_details_html() {\r\n\r\n\t\t// custom html in config\r\n\t\tif (gt.config.custom_popup_html) {\r\n\t\t\tconst html = gt.config.custom_popup_html;\r\n\t\t\tif (typeof html === 'string') {\r\n\t\t\t\treturn html;\r\n\t\t\t}\r\n\t\t\tif (isFunction(html)) {\r\n\t\t\t\treturn html(task);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tconst start_date = self.task._start.format('MMM D');\r\n\t\tconst end_date = self.task._end.format('MMM D');\r\n\t\tconst heading = `${self.task.name}: ${start_date} - ${end_date}`;\r\n\r\n\t\tconst line_1 = `Duration: ${self.duration} days`;\r\n\t\tconst line_2 = self.task.progress ? `Progress: ${self.task.progress}` : null;\r\n\r\n\t\tconst html = `\r\n\t\t\t<div class=\"details-container\">\r\n\t\t\t\t<h5>${heading}</h5>\r\n\t\t\t\t<p>${line_1}</p>\r\n\t\t\t\t${\r\n\t\t\tline_2 ? `<p>${line_2}</p>` : ''\r\n\t\t\t}\r\n\t\t\t</div>\r\n\t\t`;\r\n\t\treturn html;\r\n\t}\r\n\r\n\tfunction get_details_position() {\r\n\t\treturn {\r\n\t\t\tx: self.$bar.getEndX() + 2,\r\n\t\t\ty: self.$bar.getY() - 10\r\n\t\t};\r\n\t}\r\n\r\n\tfunction bind_resize() {\r\n\t\tconst { left, right } = get_handles();\r\n\r\n\t\tleft.drag(onmove_left, onstart, onstop_left);\r\n\t\tright.drag(onmove_right, onstart, onstop_right);\r\n\r\n\t\tfunction onmove_right(dx, dy) {\r\n\t\t\tonmove_handle_right(dx, dy);\r\n\t\t}\r\n\t\tfunction onstop_right() {\r\n\t\t\tonstop_handle_right();\r\n\t\t}\r\n\r\n\t\tfunction onmove_left(dx, dy) {\r\n\t\t\tonmove_handle_left(dx, dy);\r\n\t\t}\r\n\t\tfunction onstop_left() {\r\n\t\t\tonstop_handle_left();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction get_handles() {\r\n\t\treturn {\r\n\t\t\tleft: self.handle_group.select('.handle.left'),\r\n\t\t\tright: self.handle_group.select('.handle.right')\r\n\t\t};\r\n\t}\r\n\r\n\tfunction bind_drag() {\r\n\t\tself.bar_group.drag(onmove, onstart, onstop);\r\n\t}\r\n\r\n\tfunction bind_resize_progress() {\r\n\t\tconst bar = self.$bar,\r\n\t\t\tbar_progress = self.$bar_progress,\r\n\t\t\thandle = self.group.select('.handle.progress');\r\n\t\thandle && handle.drag(on_move, on_start, on_stop);\r\n\r\n\t\tfunction on_move(dx, dy) {\r\n\t\t\tif (dx > bar_progress.max_dx) {\r\n\t\t\t\tdx = bar_progress.max_dx;\r\n\t\t\t}\r\n\t\t\tif (dx < bar_progress.min_dx) {\r\n\t\t\t\tdx = bar_progress.min_dx;\r\n\t\t\t}\r\n\r\n\t\t\tbar_progress.attr('width', bar_progress.owidth + dx);\r\n\t\t\thandle.attr('points', get_progress_polygon_points());\r\n\t\t\tbar_progress.finaldx = dx;\r\n\t\t}\r\n\t\tfunction on_stop() {\r\n\t\t\tif (!bar_progress.finaldx) return;\r\n\t\t\tprogress_changed();\r\n\t\t\tset_action_completed();\r\n\t\t}\r\n\t\tfunction on_start() {\r\n\t\t\tbar_progress.finaldx = 0;\r\n\t\t\tbar_progress.owidth = bar_progress.getWidth();\r\n\t\t\tbar_progress.min_dx = -bar_progress.getWidth();\r\n\t\t\tbar_progress.max_dx = bar.getWidth() - bar_progress.getWidth();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onstart() {\r\n\t\tconst bar = self.$bar;\r\n\t\tbar.ox = bar.getX();\r\n\t\tbar.oy = bar.getY();\r\n\t\tbar.owidth = bar.getWidth();\r\n\t\tconsole.log('bar.owidth - redraw the polygon ');\r\n\t\tconsole.log(bar);\r\n\t\tbar.finaldx = 0;\r\n\t\trun_method_for_dependencies('onstart');\r\n\t}\r\n\tself.onstart = onstart;\r\n\r\n\tfunction onmove(dx, dy) {\r\n\t\tconst bar = self.$bar;\r\n\t\tbar.finaldx = get_snap_position(dx);\r\n\t\tconsole.log(bar);\r\n\t\tupdate_bar_position({ x: bar.ox + bar.finaldx });\r\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\r\n\t}\r\n\tself.onmove = onmove;\r\n\r\n\tfunction onstop() {\r\n\t\tconst bar = self.$bar;\r\n\t\tif (!bar.finaldx) return;\r\n\t\tdate_changed();\r\n\t\tset_action_completed();\r\n\t\trun_method_for_dependencies('onstop');\r\n\t}\r\n\tself.onstop = onstop;\r\n\r\n\tfunction onmove_handle_left(dx, dy) {\r\n\t\tconst bar = self.$bar;\r\n\t\tbar.finaldx = get_snap_position(dx);\r\n\t\tupdate_bar_position({\r\n\t\t\tx: bar.ox + bar.finaldx,\r\n\t\t\twidth: bar.owidth - bar.finaldx\r\n\t\t});\r\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\r\n\t}\r\n\tself.onmove_handle_left = onmove_handle_left;\r\n\r\n\tfunction onstop_handle_left() {\r\n\t\tconst bar = self.$bar;\r\n\t\tif (bar.finaldx) date_changed();\r\n\t\tset_action_completed();\r\n\t\trun_method_for_dependencies('onstop');\r\n\t}\r\n\tself.onstop_handle_left = onstop_handle_left;\r\n\r\n\tfunction run_method_for_dependencies(fn, args) {\r\n\t\tconst dm = gt.dependency_map;\r\n\t\tif (dm[self.task.id]) {\r\n\t\t\tfor (let deptask of dm[self.task.id]) {\r\n\t\t\t\tconst dt = gt.get_bar(deptask);\r\n\t\t\t\tdt[fn].apply(dt, args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onmove_handle_right(dx, dy) {\r\n\t\tconst bar = self.$bar;\r\n\t\tbar.finaldx = get_snap_position(dx);\r\n\t\tupdate_bar_position({ width: bar.owidth + bar.finaldx });\r\n\t}\r\n\r\n\tfunction onstop_handle_right() {\r\n\t\tconst bar = self.$bar;\r\n\t\tif (bar.finaldx) date_changed();\r\n\t\tset_action_completed();\r\n\t}\r\n\r\n\tfunction update_bar_position({ x = null, width = null }) {\r\n\t\tconst bar = self.$bar;\r\n\t\tif (x) {\r\n\t\t\t// get all x values of parent task\r\n\t\t\tconst xs = task.dependencies.map(dep => {\r\n\t\t\t\treturn gt.get_bar(dep).$bar.getX();\r\n\t\t\t});\r\n\t\t\t// child task must not go before parent\r\n\t\t\tconst valid_x = xs.reduce((prev, curr) => {\r\n\t\t\t\treturn x >= curr;\r\n\t\t\t}, x);\r\n\t\t\tif (!valid_x) {\r\n\t\t\t\twidth = null;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// console.log('update bar position ----------')\r\n\t\t\tupdate_attr(bar, 'x', x);\r\n\t\t\t// TO LSW >>>>>>>>>>>>>>>>>>>\r\n\t\t\t// update polygon - redraw\r\n\t\t}\r\n\t\tif (width && width >= gt.config.column_width) {\r\n\t\t\tupdate_attr(bar, 'width', width);\r\n\t\t\tdebounce(updateInnerOctogon(width), 250);\r\n\t\t}\r\n\t\tupdate_label_position();\r\n\t\tupdate_handle_position();\r\n\t\tupdate_progressbar_position();\r\n\t\tupdate_arrow_position();\r\n\t\tupdate_details_position();\r\n\t}\r\n\r\n\tfunction setup_click_event() {\r\n\t\tself.group.click(function () {\r\n\t\t\tif (self.action_completed) {\r\n\t\t\t\t// just finished a move action, wait for a few seconds\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (self.group.hasClass('active')) {\r\n\t\t\t\tgt.trigger_event('click', [self.task]);\r\n\t\t\t}\r\n\t\t\tgt.unselect_all();\r\n\t\t\tself.group.toggleClass('active');\r\n\t\t});\r\n\t}\r\n\r\n\tfunction date_changed() {\r\n\t\tconst { new_start_date, new_end_date } = compute_start_end_date();\r\n\t\tself.task._start = new_start_date;\r\n\t\tself.task._end = new_end_date;\r\n\t\trender_details();\r\n\t\tgt.trigger_event('date_change',\r\n\t\t\t[self.task, new_start_date, new_end_date]);\r\n\t}\r\n\r\n\tfunction progress_changed() {\r\n\t\tconst new_progress = compute_progress();\r\n\t\tself.task.progress = new_progress;\r\n\t\trender_details();\r\n\t\tgt.trigger_event('progress_change',\r\n\t\t\t[self.task, new_progress]);\r\n\t}\r\n\r\n\tfunction set_action_completed() {\r\n\t\tself.action_completed = true;\r\n\t\tsetTimeout(() => self.action_completed = false, 2000);\r\n\t}\r\n\r\n\tfunction compute_start_end_date() {\r\n\t\tconst bar = self.$bar;\r\n\t\tconst x_in_units = bar.getX() / gt.config.column_width;\r\n\t\tconst new_start_date = gt.gantt_start.clone().add(x_in_units * gt.config.step, 'hours');\r\n\t\tconst width_in_units = bar.getWidth() / gt.config.column_width;\r\n\t\tconst new_end_date = new_start_date.clone().add(width_in_units * gt.config.step, 'hours');\r\n\t\t// lets say duration is 2 days\r\n\t\t// start_date = May 24 00:00:00\r\n\t\t// end_date = May 24 + 2 days = May 26 (incorrect)\r\n\t\t// so subtract 1 second so that\r\n\t\t// end_date = May 25 23:59:59\r\n\t\tnew_end_date.add('-1', 'seconds');\r\n\t\treturn { new_start_date, new_end_date };\r\n\t}\r\n\r\n\tfunction compute_progress() {\r\n\t\tconst progress = self.$bar_progress.getWidth() / self.$bar.getWidth() * 100;\r\n\t\treturn parseInt(progress, 10);\r\n\t}\r\n\r\n\tfunction compute_x() {\r\n\t\tlet x = self.task._start.diff(gt.gantt_start, 'hours') /\r\n\t\t\tgt.config.step * gt.config.column_width;\r\n\r\n\t\tif (gt.view_is('Month')) {\r\n\t\t\tx = self.task._start.diff(gt.gantt_start, 'days') *\r\n\t\t\t\tgt.config.column_width / 30;\r\n\t\t}\r\n\t\treturn x;\r\n\t}\r\n\r\n\tfunction compute_y() {\r\n\t\treturn gt.config.header_height + gt.config.padding +\r\n\t\t\tself.task._index * (self.height + gt.config.padding);\r\n\t}\r\n\r\n\tfunction get_snap_position(dx) {\r\n\t\tlet odx = dx, rem, position;\r\n\r\n\t\tif (gt.view_is('Week')) {\r\n\t\t\trem = dx % (gt.config.column_width / 7);\r\n\t\t\tposition = odx - rem +\r\n\t\t\t\t((rem < gt.config.column_width / 14) ? 0 : gt.config.column_width / 7);\r\n\t\t} else if (gt.view_is('Month')) {\r\n\t\t\trem = dx % (gt.config.column_width / 30);\r\n\t\t\tposition = odx - rem +\r\n\t\t\t\t((rem < gt.config.column_width / 60) ? 0 : gt.config.column_width / 30);\r\n\t\t} else {\r\n\t\t\trem = dx % gt.config.column_width;\r\n\t\t\tposition = odx - rem +\r\n\t\t\t\t((rem < gt.config.column_width / 2) ? 0 : gt.config.column_width);\r\n\t\t}\r\n\t\treturn position;\r\n\t}\r\n\r\n\tfunction update_attr(element, attr, value) {\r\n\t\tvalue = +value;\r\n\t\tif (!isNaN(value)) {\r\n\t\t\telement.attr(attr, value);\r\n\t\t}\r\n\t\treturn element;\r\n\t}\r\n\r\n\tfunction update_progressbar_position() {\r\n\t\tself.$bar_progress.attr('x', self.$bar.getX());\r\n\t\tif (self.task.progress) {\r\n\t\t\tself.$bar_progress.attr('width', self.$bar.getWidth() * (self.task.progress / 100));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction update_label_position() {\r\n\t\tconst bar = self.$bar,\r\n\t\t\tlabel = self.group.select('.bar-label');\r\n\t\tif (label.getBBox().width > bar.getWidth()) {\r\n\t\t\tlabel.addClass('big').attr('x', bar.getX() + bar.getWidth() + 5);\r\n\t\t} else {\r\n\t\t\tlabel.removeClass('big').attr('x', bar.getX() + bar.getWidth() / 2);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction update_handle_position() {\r\n\t\tconst bar = self.$bar;\r\n\t\tself.handle_group.select('.handle.left').attr({\r\n\t\t\t'x': bar.getX() + 1\r\n\t\t});\r\n\t\tself.handle_group.select('.handle.right').attr({\r\n\t\t\t'x': bar.getEndX() - 9\r\n\t\t});\r\n\t\tconst handle = self.group.select('.handle.progress');\r\n\t\thandle && handle.attr('points', get_progress_polygon_points());\r\n\t}\r\n\r\n\tfunction update_arrow_position() {\r\n\t\tfor (let arrow of self.arrows) {\r\n\t\t\tarrow.update();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction update_details_position() {\r\n\t\tconst { x, y } = get_details_position();\r\n\t\tself.details_box && self.details_box.transform(`t${x},${y}`);\r\n\t}\r\n\r\n\tfunction isFunction(functionToCheck) {\r\n\t\tvar getType = {};\r\n\t\treturn functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\r\n\t}\r\n\r\n\tinit();\r\n\r\n\treturn self;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/walters_l/Documents/Repos/Gantt-frappe/~/eslint-loader!./src/Octogon.js\n **/","// Returns a function, that, as long as it continues to be invoked, will not\r\n// be triggered. The function will be called after it stops being called for\r\n// N milliseconds. If `immediate` is passed, trigger the function on the\r\n// leading edge, instead of the trailing.\r\nexport function debounce(func, wait, immediate) {\r\n\tvar timeout;\r\n\treturn function () {\r\n\t\tvar context = this, args = arguments;\r\n\t\tvar later = function () {\r\n\t\t\ttimeout = null;\r\n\t\t\tif (!immediate) func.apply(context, args);\r\n\t\t};\r\n\t\tvar callNow = immediate && !timeout;\r\n\t\tclearTimeout(timeout);\r\n\t\ttimeout = setTimeout(later, wait);\r\n\t\tif (callNow) func.apply(context, args);\r\n\t};\r\n};\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/walters_l/Documents/Repos/Gantt-frappe/~/eslint-loader!./src/Utils.js\n **/","/* global Snap */\r\n/*\r\n\tClass: Arrow\r\n\tfrom_task ---> to_task\r\n\r\n\tOpts:\r\n\t\tgantt (Gantt object)\r\n\t\tfrom_task (Bar object)\r\n\t\tto_task (Bar object)\r\n*/\r\n\r\nexport default function Arrow(gt, from_task, to_task) {\r\n\r\n\tconst self = {};\r\n\r\n\tfunction init() {\r\n\t\tself.from_task = from_task;\r\n\t\tself.to_task = to_task;\r\n\t\tprepare();\r\n\t\tdraw();\r\n\t}\r\n\r\n\tfunction prepare() {\r\n\r\n\t\tself.start_x = from_task.$bar.getX() + from_task.$bar.getWidth() / 2;\r\n\r\n\t\tconst condition = () =>\r\n\t\t\tto_task.$bar.getX() < self.start_x + gt.config.padding &&\r\n\t\t\t\tself.start_x > from_task.$bar.getX() + gt.config.padding;\r\n\r\n\t\twhile(condition()) {\r\n\t\t\tself.start_x -= 10;\r\n\t\t}\r\n\r\n\t\tself.start_y = gt.config.header_height + gt.config.bar.height +\r\n\t\t\t(gt.config.padding + gt.config.bar.height) * from_task.task._index +\r\n\t\t\tgt.config.padding;\r\n\r\n\t\tself.end_x = to_task.$bar.getX() - gt.config.padding / 2;\r\n\t\tself.end_y = gt.config.header_height + gt.config.bar.height / 2 +\r\n\t\t\t(gt.config.padding + gt.config.bar.height) * to_task.task._index +\r\n\t\t\tgt.config.padding;\r\n\r\n\t\tconst from_is_below_to = (from_task.task._index > to_task.task._index);\r\n\t\tself.curve = gt.config.arrow.curve;\r\n\t\tself.clockwise = from_is_below_to ? 1 : 0;\r\n\t\tself.curve_y = from_is_below_to ? -self.curve : self.curve;\r\n\t\tself.offset = from_is_below_to ?\r\n\t\t\tself.end_y + gt.config.arrow.curve :\r\n\t\t\tself.end_y - gt.config.arrow.curve;\r\n\r\n\t\tself.path =\r\n\t\t\tSnap.format('M {start_x} {start_y} V {offset} ' +\r\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\r\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\r\n\t\t\t\t{\r\n\t\t\t\t\tstart_x: self.start_x,\r\n\t\t\t\t\tstart_y: self.start_y,\r\n\t\t\t\t\tend_x: self.end_x,\r\n\t\t\t\t\tend_y: self.end_y,\r\n\t\t\t\t\toffset: self.offset,\r\n\t\t\t\t\tcurve: self.curve,\r\n\t\t\t\t\tclockwise: self.clockwise,\r\n\t\t\t\t\tcurve_y: self.curve_y\r\n\t\t\t\t});\r\n\r\n\t\tif(to_task.$bar.getX() < from_task.$bar.getX() + gt.config.padding) {\r\n\t\t\tself.path =\r\n\t\t\t\tSnap.format('M {start_x} {start_y} v {down_1} ' +\r\n\t\t\t\t'a {curve} {curve} 0 0 1 -{curve} {curve} H {left} ' +\r\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} -{curve} {curve_y} V {down_2} ' +\r\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\r\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tstart_x: self.start_x,\r\n\t\t\t\t\t\tstart_y: self.start_y,\r\n\t\t\t\t\t\tend_x: self.end_x,\r\n\t\t\t\t\t\tend_y: self.end_y,\r\n\t\t\t\t\t\tdown_1: gt.config.padding / 2 - self.curve,\r\n\t\t\t\t\t\tdown_2: to_task.$bar.getY() + to_task.$bar.getHeight() / 2 - self.curve_y,\r\n\t\t\t\t\t\tleft: to_task.$bar.getX() - gt.config.padding,\r\n\t\t\t\t\t\toffset: self.offset,\r\n\t\t\t\t\t\tcurve: self.curve,\r\n\t\t\t\t\t\tclockwise: self.clockwise,\r\n\t\t\t\t\t\tcurve_y: self.curve_y\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction draw() {\r\n\t\tself.element = gt.canvas.path(self.path)\r\n\t\t\t.attr('data-from', self.from_task.task.id)\r\n\t\t\t.attr('data-to', self.to_task.task.id);\r\n\t}\r\n\r\n\tfunction update() { // eslint-disable-line\r\n\t\tprepare();\r\n\t\tself.element.attr('d', self.path);\r\n\t}\r\n\tself.update = update;\r\n\r\n\tinit();\r\n\r\n\treturn self;\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/walters_l/Documents/Repos/Gantt-frappe/~/eslint-loader!./src/Arrow.js\n **/","export function ScrollWheelInit(element) {\r\n\tconst display = document.getElementById(element);\r\n\trequire('mouse-wheel')(\r\n\t\tdisplay,\r\n\t\tfunction (dx, dy, dz, ev) {\r\n\t\t\t// const display = document.getElementById('wheeldata');\r\n\t\t\t// display.innerHTML = '<p>Scroll:' + [dx, dy, dz, ev] + '</p>';\r\n\t\t\tif (dy > 0) {\r\n\t\t\t\tconsole.log('zoom in');\r\n\t\t\t} else if (dy < 0) {\r\n\t\t\t\tconsole.log('zoom out');\r\n\t\t\t}\r\n\t\t\t// console.dir(ev)\r\n\t\t\tconsole.log(`Scroll left: ${display.scrollLeft}`);\r\n\t\t\t// console.log(`Scroll pos, x: ${ev.screenX} y: ${ev.screenY}`);\r\n\t\t\tconsole.log(`Gantt mouse, x: ${ev.offsetX} y: ${ev.offsetY}`);\r\n\r\n\t\t}/* ,\r\n            'noScroll' */\r\n\t);\r\n}\r\n\r\nexport function ClickChart(element) {\r\n\tconst display = document.getElementById(element);\r\n\tdisplay.addEventListener('click', clicked);\r\n\r\n\tfunction clicked(evt) {\r\n\t\t// var e = evt.target;\r\n\t\t// var dim = e.getBoundingClientRect();\r\n\t\t// var x = evt.clientX - dim.left;\r\n\t\t// var y = evt.clientY - dim.top;\r\n\t\t// console.log(evt);\r\n\t\t// console.log($(this).attr('id'));\r\n\t\t// console.log('--------------------');\r\n\t\t// console.log(evt.target.getAttribute('id'));\r\n\t\t// console.log(evt.currentTarget);\r\n\t\t// console.log(evt.target.id);\r\n\t\t// console.log('x: ' + x + ' y:' + y);\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** C:/Users/walters_l/Documents/Repos/Gantt-frappe/~/eslint-loader!./src/ScrollUtils.js\n **/","'use strict'\n\nvar toPX = require('to-px')\n\nmodule.exports = mouseWheelListen\n\nfunction mouseWheelListen(element, callback, noScroll) {\n  if(typeof element === 'function') {\n    noScroll = !!callback\n    callback = element\n    element = window\n  }\n  var lineHeight = toPX('ex', element)\n  var listener = function(ev) {\n    if(noScroll) {\n      ev.preventDefault()\n    }\n    var dx = ev.deltaX || 0\n    var dy = ev.deltaY || 0\n    var dz = ev.deltaZ || 0\n    var mode = ev.deltaMode\n    var scale = 1\n    switch(mode) {\n      case 1:\n        scale = lineHeight\n      break\n      case 2:\n        scale = window.innerHeight\n      break\n    }\n    dx *= scale\n    dy *= scale\n    dz *= scale\n    if(dx || dy || dz) {\n      return callback(dx, dy, dz, ev)\n    }\n  }\n  element.addEventListener('wheel', listener)\n  return listener\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/mouse-wheel/wheel.js\n ** module id = 9\n ** module chunks = 0\n **/","'use strict'\n\nvar parseUnit = require('parse-unit')\n\nmodule.exports = toPX\n\nvar PIXELS_PER_INCH = 96\n\nfunction getPropertyInPX(element, prop) {\n  var parts = parseUnit(getComputedStyle(element).getPropertyValue(prop))\n  return parts[0] * toPX(parts[1], element)\n}\n\n//This brutal hack is needed\nfunction getSizeBrutal(unit, element) {\n  var testDIV = document.createElement('div')\n  testDIV.style['font-size'] = '128' + unit\n  element.appendChild(testDIV)\n  var size = getPropertyInPX(testDIV, 'font-size') / 128\n  element.removeChild(testDIV)\n  return size\n}\n\nfunction toPX(str, element) {\n  element = element || document.body\n  str = (str || 'px').trim().toLowerCase()\n  if(element === window || element === document) {\n    element = document.body \n  }\n  switch(str) {\n    case '%':  //Ambiguous, not sure if we should use width or height\n      return element.clientHeight / 100.0\n    case 'ch':\n    case 'ex':\n      return getSizeBrutal(str, element)\n    case 'em':\n      return getPropertyInPX(element, 'font-size')\n    case 'rem':\n      return getPropertyInPX(document.body, 'font-size')\n    case 'vw':\n      return window.innerWidth/100\n    case 'vh':\n      return window.innerHeight/100\n    case 'vmin':\n      return Math.min(window.innerWidth, window.innerHeight) / 100\n    case 'vmax':\n      return Math.max(window.innerWidth, window.innerHeight) / 100\n    case 'in':\n      return PIXELS_PER_INCH\n    case 'cm':\n      return PIXELS_PER_INCH / 2.54\n    case 'mm':\n      return PIXELS_PER_INCH / 25.4\n    case 'pt':\n      return PIXELS_PER_INCH / 72\n    case 'pc':\n      return PIXELS_PER_INCH / 6\n  }\n  return 1\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/to-px/topx.js\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = function parseUnit(str, out) {\n    if (!out)\n        out = [ 0, '' ]\n\n    str = String(str)\n    var num = parseFloat(str, 10)\n    out[0] = num\n    out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n    return out\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/parse-unit/index.js\n ** module id = 11\n ** module chunks = 0\n **/"],"sourceRoot":""}
>>>>>>> multi-dimensional
